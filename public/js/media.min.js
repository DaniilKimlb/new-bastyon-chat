window.BSTMediaCs=function(){var i=this;isios=function(){return window.cordova&&window.device&&"iOS"==deep(window,"device.platform")||["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},i.gettingmedia=!1;var e={ios:{audio:function(){return new Promise(((i,e)=>{window.audioinput.checkMicrophonePermission((function(o){o?i():window.audioinput.getMicrophonePermission((function(o,n){o?i():e("permissions")}))}))}))},video:function(){return new Promise(((i,e)=>{cordova.plugins.iosrtc.requestPermission(!0,!0,(function(o){o?i():e("permissions")}))}))}},audio:function(){var i=window.cordova.plugins.permissions;return new Promise(((e,o)=>{if(i){var n=function(){i.requestPermission(i.RECORD_AUDIO,(i=>{i.hasPermission?e():o("permissions")}),(i=>{console.error(i),o("permissions")}))};i.checkPermission(i.RECORD_AUDIO,(i=>{i.hasPermission?e():n()}),(i=>{console.error(i),n()}))}else o("permissions")}))},video:function(){var i=window.cordova.plugins.permissions;return new Promise(((e,o)=>{i?i.hasPermission(i.CAMERA,(n=>{n.hasPermission?e():i.requestPermission(i.CAMERA,(()=>{e()}),(()=>{o("permissions")}))})):o("permissions")}))}},o=function(i){var o=function(i,e){return e?i():Promise.resolve()};if(window.cordova&&window.device){var n=isios();return o(n?e.ios.audio:e.audio,i.audio).then((()=>o(n?e.ios.video:e.video,i.video))).catch((i=>(console.error("E",i),Promise.reject(i))))}return Promise.resolve()};i.get=function(i){return function(i){return new Promise(((e,n)=>{o(i).then((()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(i).then(e).catch(n):(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)(i,e,n)})).catch(n)}))}(i)},i.permissions=o},window.BSTMedia=new window.BSTMediaCs;