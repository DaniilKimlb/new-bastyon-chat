secInTime=function(e){var t=e/3600^0,n=(e-3600*t)/60^0,a=e-3600*t-60*n,i=[];return t&&i.push(addZero(t.toFixed(0))),i.push(addZero(n.toFixed(0))),i.push(addZero(a.toFixed(0))),i.join(":")},addZero=function(e){return Number(e)<10&&(e="0"+e),e},dateToStr=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e+addZero(t.getHours().toString())+addZero(t.getMinutes().toString())},dateToStrS=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e+addZero(t.getHours().toString())+addZero(t.getMinutes().toString())+addZero(t.getSeconds().toString())},dateToStrUTCSS=function(e){var t=e||new Date,n=addZero((t.getUTCMonth()+1).toString()),a=(e=addZero(t.getUTCDate().toString()),addZero(t.getUTCFullYear().toString())),i=addZero(t.getUTCHours().toString()),r=addZero(t.getUTCMinutes().toString()),o=addZero(t.getUTCSeconds().toString()),s=t.getUTCMilliseconds().toString(),l=4-s.length;return l>0&&(s=(Number(s)*Math.pow(10,l)).toString()),a+n+e+i+r+o+s},strToDateArr=function(e){return[e.substring(0,4),e.substring(4,6),e.substring(6,8)]},dateToStrSmall=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e},dateToStrUtc=function(e){var t=nowDateUtc(e);return dateToStr(t)},dateToStrUtcS=function(e){var t=nowDateUtc(e);return dateToStrS(t)},strToDate=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),r=e.substring(10,12),o=e.substring(12,14)||0;return new Date(t,n-1,a,i,r,o)},strToDateSS=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),r=e.substring(10,12),o=e.substring(12,14)||0,s=e.substring(14,17)||0;return new Date(t,n-1,a,i,r,o,s)},strToDateSmall=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8);return new Date(t,n-1,a)},dateNow=function(e){if(!e)e=new Date;var t=e.getMonth()+1,n=e.getDate(),a=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),[e.getFullYear(),t,n,a,i]},utcnow=function(e){var t=e||new Date,n=t.getTime()+60*t.getTimezoneOffset()*1e3,a=new Date(n);return a.toString(),a},fromutc=function(e){var t=e||new Date,n=t.getTime()-60*t.getTimezoneOffset()*1e3,a=new Date(n);return a.toString(),a},utcStrToDate=function(e){var t=strToDate(e),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());return n=new Date(n),n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())},nowDateUtc=function(e){var t=e||new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},convertDate=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),r=e.substring(10,12),o=t;return n&&(o+=" "+["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][n-1]),a&&(o+=" "+a),i&&(o+=", "+i,o+=r?":"+r:"H"),o},successCheck=function(e){e||(e={});var t=e.el||$("body"),n=null;return n=$("<div>",{class:"successCheck",html:'<div class="successCheckWrapper "><div><div class="chw">\t\t   <svg viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\t\t\t   <path d="M 18 32.34 l -8.34 -8.34 -2.83 2.83 11.17 11.17 24 -24 -2.83 -2.83 z" stroke="#a4a4a4" fill="transparent"/>\t\t   </svg>\t   </div><div class="text">SUCCESS</div></div></div>'}),window.rifticker.add((()=>{t.append(n),n.find("svg")[0].classList.add("animate"),window.rifticker.add((()=>{n.addClass("active")}))})),setTimeout((function(){window.rifticker.add((()=>{n.removeClass("active")})),setTimeout((function(){window.rifticker.add((()=>{n.remove()}))}),300)}),900),this},easeOutQuint=function(e){return 1-Math.pow(1-e,10)},wnd=function(e){e||(e={});var t,n=this,a=e.app,i=e.content||null,r="w"+makeid().split("-")[0],o=e.nooverflow||e.pip,s=e.el||e.app.el.windows,l=!1,c=null,u=null,d=function(e){if(t)return t.find(e)},p=["default","bottom"];n.independent=e.pip,n.redraw=function(){var a=[];e.scrollers&&(a=_.map(d(e.scrollers),(function(e){return $(e).scrollTop()}))),d(".wndcontent").html(i),e.scrollers&&$.each(d(e.scrollers),(function(e){$(this).scrollTop(a[e])})),e.success&&e.success(t,n,!0)};var f=function(){},v=function(){return'<div class="changeStateButtons"><div class="hideButton changeButton roundclosebutton"><i class="fas fa-minus"></i></div><div class="closeButton changeButton roundclosebutton"><i class="fas fa-times"></i></div><div class="changeButton expandButton"><i class="fas fa-expand-arrows-alt"></i></div></div>'},h=function(){return'<div class="_expand roundclosebutton"><i class="fas fa-expand"></i></div><div class="_changeplace roundclosebutton"><i class="fas fa-angle-down"></i></div>'},m=function(){return'<div class="_close roundclosebutton"><i class="fa fa-times" aria-hidden="true"></i></div><div class="closeline"></div>'},g=function(){},b=function(){c&&(c.clear(),c.destroy(),c=null)},y=function(){if(isTablet()&&!c&&l){var n={cancellable:!0,positionclbk:function(e,t){Math.abs(e)},constraints:function(e){var t=!1,n=_.find(e.path,(function(e){return"windowsContainer"==e.id&&(t=!0),t?null:e.classList.contains("customscroll")}));return!n||(0==n.scrollTop?(isios()&&(n.scrollTop=1),!0):void 0)},restrict:!0,trueshold:20,distance:100,clbk:function(){k.close(!0)}},a={};e.reversePrlx?a.up=n:a.down=n,c=new SwipeParallaxNew({el:t.find(e.parallaxselector||".wndinner"),transformel:t.find(".wndinner"),allowPageScroll:"auto",directions:a}).init()}},w=function(){u&&(!u.scrollTop||isios()&&u.scrollTop<=1?y():b())},x=!1,k={expand:function(){var t=e.expand;k.close(),setTimeout((function(){t&&t()}),200)},close:function(i,l){if(!x){x=!0,i&&e.closecross&&e.closecross(t,n),e.close&&e.close(t,n),delete a.events.resize[r],delete a.events.scroll[r],window.rifticker.add((()=>{b(),t.addClass("asette"),t.removeClass("sette")})),o||a.actions.onScroll();i=function(){n.essenseDestroy&&n.essenseDestroy(l),window.rifticker.add((()=>{t.remove(),t=null,u=null,n.el=null,n.close=null,_.each(e.buttons,(function(e){delete e.el})),s=null,a=null,n.essenseDestroy=null,e={}}))};isMobile()&&t.hasClass("normalizedmobile")?setTimeout(i,220):i(),e.onclose&&e.onclose()}},hide:function(e,n){t&&(t.find(".buttons").addClass("hidden"),t.addClass("hiddenState"),t.find(".wndcontent > div").addClass("rolledUp"),o||a.actions.onScroll())},show:function(e,n){t&&(t.find(".buttons").removeClass("hidden"),t.removeClass("hiddenState"),t.find(".wndcontent > div").removeClass("rolledUp"),o||a.actions.offScroll(t))}};n.unhidenormalized=function(){a.mobileview&&t&&t.hasClass("normalizedmobile")&&t.find(".wndcontent>div").css("opacity",1)},n.buttonState=function(t,n){var a="disabled";"function"==typeof n&&(n=n()),n?e.buttons[t].el.removeClass(a):e.buttons[t].el.addClass(a)};return function(){e.preloader&&preloader(!0),e.buttons||(e.buttons={}),e.buttons.close||e.noCloseButton||(e.buttons.close={action:close,html:a?a.localization.e("close"):"Close",class:"close"});a.chatposition&&a.chatposition(!1),i&&(e.preloader&&preloader(!1),function(l){e.type||(e.type="");var c='<div class="wndback" id='+r+"></div>"+(e.pip?h():"")+(e.allowHide?v():m())+'<div class="wndinner '+e.type+'">';e.leftbg&&(c+='<div class="leftbg"><div>'+e.leftbg+"</div></div>"),e.header&&(c+='<div class="wndheader">'+(a.localization.e(e.header)||e.header)+"</div>"),c+='<div class="wndcontent customscroll content">'+i+"</div>",e.noButtons||(c+='<div class="buttons windowmainbuttons">',_.each(e.buttons,(function(e,t){var n=e.html?e.html:a?a.localization.e(e.text)||e.text||"":e.text||"",i='<div class="button '+(e.class||"")+'" bi="'+t+'">'+n+"</div>";c+=i})),c+="</div>"),t=$("<div>",{class:"wnd",html:c}),e.header||t.addClass("noheader"),e.pip&&(t.addClass("pipmini"),t.attr("position",localStorage.pipposition||"default"));var u=s.find(".hiddenState");o||a.actions.offScroll(t),window.rifticker.add((()=>{u.length?u.before(t):s.append(t),t.find("._close").on("click",(function(){k.close(!0)})),t.find("._expand").on("click",(function(){k.expand(!0)})),t.find("._changeplace").on("click",(function(){var e=localStorage.pipposition||"default";e=nextElCircle(p,e),localStorage.pipposition=e,t.attr("position",e)})),e.noButtons||_.each(e.buttons,(function(e,a){var i=t.find('.wndinner>div.buttons .button[bi="'+a+'"]'),r=e.fn||k[e.action]||k.close;i.on("click",(function(){r(t,n)}))})),e.class&&t.addClass(e.class),t.css("display","block"),t.addClass("asette"),e.showbetter&&t.addClass("showbetter"),setTimeout((function(){window.rifticker.add((()=>{t.addClass("sette")}))}),20),setTimeout((function(){window.rifticker.add((()=>{t&&t.removeClass("asette")})),t&&t.hasClass("normalizedmobile")&&setTimeout((function(){l&&!e.fastClbk&&l(),setTimeout((function(){window.rifticker.add((()=>{t&&t.find(".wndcontent>div").css("opacity",1)}))}),100)}),30)}),220),t.hasClass("normalizedmobile")&&!e.fastClbk||l&&l()}))}((function(){e.noCloseBack||t.find(".wndback").one("click",(function(){e.allowHide&&n.minimizeOnBgClick?k.hide():k.close(!0)})),e.allowHide&&(t.find(".hideButton").on("click",k.hide),t.find(".closeButton").on("click",k.close),t.find(".expandButton").on("click",k.show)),isTablet()&&t.hasClass("normalizedmobile")&&(t.find(".wndcontent"),t.hasClass("fromtop")||(l=!0)),y(),u=t.find(".wndcontent")[0],t.find(".wndcontent").on("scroll",_.throttle(w,50)),a.events.resize[r]=g,a.events.scroll[r]=f,n.el=t,e.postRender?e.postRender(t,n,(()=>{e.clbk&&e.clbk(n,t)})):e.clbk&&e.clbk(n,t)})))}(),n.find=d,n.close=k.close,n.el=t,n.hide=k.hide,n.show=k.show,n},tooltipMobileDialog=function(e){e||(e={}),e.wrap=!0,e.class="tooltipMobileDialog",e.html='<div class="mobiledialogcontent">'+(e.html||"")+'</div><div class="closeButton"><button class="button ghost"><i class="far fa-times-circle"></i> '+app.localization.e("close")+"</button></div>";var t=e.clbk||function(){},n="";e.clbk=function(i){i.find(".closeButton").on("click",(function(){a.destroy()})),setTimeout((function(){i.addClass("animend")}),20),e.app&&(n=e.app.mobile.statusbar.status,e.app.mobile.statusbar.gallerybackground()),t(i)},e.onDestroy=function(){e.app&&n&&e.app.mobile.statusbar[n]&&e.app.mobile.statusbar[n]()};var a=new dialog(e);return a},menuDialog=function(e){e||(e={}),e.wrap=!0,e.class="menudialog";var t;e.html=(t="",t+='<div class="mobiledialogcontent customscroll">',_.each(e.items,(function(e,n){t+='<div class="item '+(e.class||"")+'" item="'+n+'">',t+=e.text,t+="</div>"})),t+="</div>",t+='<div class="closeButton">',t+='<div class="item itemclose">',t+='<i class="far fa-times-circle"></i> '+app.localization.e("close"),t+="</div>",t+="</div>"),e.clbk=function(t){t.find(".item").on("click",(function(){var t=$(this).attr("item");return t&&e.items[t].action?e.items[t].action((function(){n.destroy()})):n.destroy(),!1})),t.on("click",(function(){n.destroy()}))};var n=new dialog(e);return n},inputDialogNew=function(e){var t;e||(e={}),e.alert||(e.alert="Please enter values"),e.class=(e.class||"")+" input",e.wrap=!0;var n=e.mmoneyparam,a=e.percentparam,i=function(e,t){return e.dollars&&(n.value=t.toString(),t=maskValue(n)),e.percent&&(a.value=t.toString(),t=maskValue(a)),e.convertIn&&(t=e.convertIn(t)),t};e.html='<div class="caption">'+e.caption+"</div>",e.html+='<div class="values">',_.each(e.values,(function(t,n){if(t.time)return e.html+="<div class='timeselector' index='"+n+"'>",void(e.html+="</div>");var a="",r="";t.dollars&&(a="dollars"),t.percent&&(a="percent"),t.slider&&(r="hasslider"),e.html+='<div class="value '+r+'">',t.checkbox||(e.html+='<div class="label">',e.html+=t.label,e.html+="</div>"),e.html+='<div class="v">',t.checkbox?(e.html+='<input class="checkbox" type="checkbox" index="'+n+'" id="value'+n+'" ',1==t.defValue&&(e.html+="checked"),e.html+='><label for="value'+n+'">'+t.label+"</label>"):t.text?e.html+='<textarea elementsid="textarea_'+n+'" placeholder="'+(t.placeholder||t.label||"")+'" class="'+a+'" index="'+n+'">'+(t.defValue||"")+"</textarea>":t.upload?(e.html+='<div class="upload" index="'+n+'">',e.html+=t.placeholder,e.html+='<div class="uploaded"></div>',e.html+="</div>"):t.select?(e.html+='<select index="'+n+'">',_.each(t.select.values,(function(n){var a="";n.v==t.select.default&&(a="selected"),e.html+='<option  value="'+n.v+'" '+a+">",e.html+=n.l,e.html+="</option>"})),e.html+="</select>"):(t.defValue&&t.defValue.toFixed&&(t.defValue=t.defValue.toFixed(e.precision||0)),e.html+='<input placeholder="'+(t.placeholder||t.label||"")+'" class="'+a+'" index="'+n+'" data-validate="'+(t.validate||"name")+'" type="'+(t.type||"text")+'" value="'+(t.defValue||"")+'" '+(t.allowNull?'allow-null="true"':"")+"></input>"),e.html+="</div>",t.slider&&(e.html+="<div class='sliderWrapper' index='"+n+"'>",e.html+="<div class='sliderTableWrapper'>",e.html+="<div class='min'>"+i(t,t.slider.min)+"</div>",e.html+="<div class='sliderc'>",e.html+="<div class='slider'></div>",e.html+="</div>",e.html+="<div class='max'>"+i(t,t.slider.max)+"</div>",e.html+="</div>",e.html+="</div>"),e.html+="</div>"})),e.html+="</div>",e.additional&&(e.html+=e.additional),e.html+='<div class="alert" style="display:none">'+e.alert+"</div>";var r=e.success,o=e.clbk,s={};e.clbk=function(r){t=new Validation({form:r,success:function(){}}),n&&r.find(".dollars").maskMoney(n),a&&r.find(".percent").maskMoney(a),_.each(e.values,(function(t,o){if(t.slider){var c=r.find('input[index="'+o+'"]'),u=r.find('.sliderWrapper[index="'+o+'"] .slider'),d={slide:function(a,r){var o=r.value,s=e.precision||0;t.dollars&&(s=n.precision||0),t.percent&&(s=n.precision||0),o=o.toFixed(s),c.val(i(t,o))},value:t.defValue};_.isObject(t.slider)&&(d=_.extend(d,t.slider)),u.slider(d),c.on("change",(function(){var e=$(this).val();t.dollars&&(e=c.maskMoney("unmasked",n)[0].value),t.percent&&(e=c.maskMoney("unmasked",a)[0].value),e>t.slider.max&&(e=t.slider.max),e<t.slider.min&&(e=t.slider.min),u.slider("value",e),$(this).val(i(t,e))}))}t.text&&r.find('textarea[index="'+o+'"]').on("keyup",(function(){this.scrollTop>0&&(this.style.height=this.scrollHeight+10+"px")}));if(t.upload){var c=r.find('.upload[index="'+o+'"]');initUpload({el:c,ext:t.upload.ext||["png","jpeg","jpg"],dropZone:c,multiple:!1,action:function(e,n){s[o]=e,c.find(".uploaded").html(e.file.name+' <i class="fas fa-check-circle"></i>'),t.onchange&&t.onchange(e,l)}})}t.time&&(c=r.find('.timeselector[index="'+o+'"]')).timingfield({daysText:"Days",hoursText:"Hours",minutesText:"Minutes",secondsText:"Seconds",defaults:t.default});if(t.checkbox){c=r.find('input[index="'+o+'"]');t.onchange&&c.on("change",(function(){var e=$(this).is(":checked");t.onchange(e,l)}))}})),o&&o()},e.success=function(i){if(!t.validation({manual:!0}))return!1;var o={},l=!0;_.each(e.values,(function(e,t){if(e.time){var r=i.el.find('.timeselector[index="'+t+'"]'),c=r.find(".timingfield").val();c={d:Number(r.find(".timingfield_days input").val()||"0"),h:Number(r.find(".timingfield_hours input").val()||"0"),m:Number(r.find(".timingfield_minutes input").val()||"0"),s:Number(r.find(".timingfield_seconds input").val()||"0")}}else if(e.upload){c=s[t];var u=t}else{var d=i.el.find(".values [index='"+t+"']");c=d.val();e.checkbox&&(c=d.is(":checked")),e.dollars&&(c=d.maskMoney("unmasked",n)[0].value),e.percent&&(c=d.maskMoney("unmasked",a)[0].value);u=e.id||t;e.id&&(l=!1)}o[u]=c})),l&&(o=_.toArray(o));var c=r(o);return void 0===c||c};var l=new dialog(e);return l},dialog=function(e){var t,n,a=this,i=e.removescroll&&e.app,r=!1;if($("html").hasClass("nooverflow")&&(i=!1),e.success||(e.success=!1),e.fail||(e.fail=!1),e.close||(e.close=!1),e.destroy||(e.destroy=!1),e.btn1text||(e.btn1text=app.localization.e("daccept")),e.btn2text||(e.btn2text=app.localization.e("dcancel")),e.id){if("undefined"==typeof localStorage)return;if(e.btn2text||(e.btn2text="Don't Show Anymore"),(t=JSON.parse(localStorage.qu_rx||"{}"))[e.id])return void(e.alltrue&&e.success())}var o=function(n,i){"function"==typeof n?n(a)&&e.wrap&&s():s(),i&&e.id&&(t[e.id]=!0,localStorage.qu_rx=JSON.stringify(t)),e.wrap||s()},s=function(){r||("function"==typeof e.destroy&&e.destroy(a),r=!0,n.remove(),i&&app.actions.onScroll(),e.onDestroy&&e.onDestroy())},l=function(e){let t=!1;n.on("mousedown",(e=>{t=e.target.classList.contains("secondwrapper")})),n.on("mouseup",(e=>{t&&s(),t=!1}))};return function(){var t='<div class="wrapper table"><div class="secondwrapper"><div class="thwrapper">';if(e.header&&(t+='<div class="header"><div class="text">'+e.header+"</div></div>"),e.poll){var r='<div class="poll">';r+='<div class="question description">Question</div>',r+='<div class="title"><input elementsid="input_poll_title" class="input" type="text"><i class="fas fa-times-circle"></i></div>',r+='<div class="options description">Poll options</div>';for(var s=0;s<5;s++)r+=`<div class="poll-item" id="poll-item-${s+1}"><input elements="poll-input-item-${s+1}" class="input" type="text"><i class="fas fa-times-circle"></i></div>`;t+=r+="</div>"}e.html&&(t+='<div class="body"><div class="text">'+(e.html||"")+"</div></div>"),t+='<div class="buttons">\t\t\t\t\t   <div class="btn2wr"><button elementsid="dialog_btn2" class="btn2 medium">'+e.btn2text+'</button></div>\t\t\t\t\t   <div class="btn1wr"><button elementsid="dialog_btn1" class="btn1 medium">'+e.btn1text+'</button></div>\t\t\t\t   </div><div elementsid="dialog_close" class="_close"><i class="fa fa-times" aria-hidden="true"></i></div>\t\t\t\t   </div>\t\t\t\t   </div></div>',(n=$("<div/>",{class:"dialog "+(e.class||"")})).html(t),$("body").append(n),e.class&&n.addClass(e.class),n.find,n.find(".btn1").on("click",(function(){o(e.success)})),n.find(".btn2").on("click",(function(){o(e.fail,!0)})),n.find("._close").on("click",(function(){o(e.close,!0)})),setTimeout((()=>l()),500);var c=n.find(".poll .title");c.find("i").on("click",(function(){c.find(".input").val("")}));for(s=0;s<5;s++){let e=n.find(`#poll-item-${s+1}`);e.find("i").on("click",(function(){e.find(".input").val("")}))}e.clbk&&e.clbk(n,a),i&&app.actions.offScroll(),e.render&&e.render(n),n.fadeIn(200),bgImages(n)}(),a.el=n,a.destroy=s,a},tooltip=function(e){e||(e={});var t=this,n=e.content||"",a=e.el,i=e.event||"click",r=e.options||{},o=function(){a.hasClass("tooltipstered")||(r.debug=!1,r.contentAsHTML=!0,r.interactive=!0,r.interactiveTolerance=400,r.onlyOne=!0,r.delay=100,"mouseenter"!=i?r.trigger||(r.trigger=i):r.delay=400,r.autoClose=!1,r.theme||(r.theme="lighttooltip"),r.position||(r.position="bottom"),r.height||(r.height=420),r.maxWidth||(r.maxWidth=600),r.content=function(){return n},r.functionReady=function(n,a){t.instance=n;var r=$(a.tooltip),o=$(a.origin);t.el=function(){return r},"click"!=i&&o.on("click",(function(){n.close()})),e.clbk&&e.clbk({el:r})},r.functionInit=function(e,t){},r.functionAfter=function(t,n){e.destroy&&e.destroy()},a.tooltipster(r))};return t.close=function(){t.instance&&t.instance.close()},e.render&&o(),o(),t},sitemessage=function(e,t,n=5e3,a={}){var i="<div>"+clearStringXss(e)+"</div>";a.action&&(i+='<div class="action"><button class="black">'+a.action.text+"</button></div>");var r=$("<div/>",{class:"sitemessage remove_now removing "+(a.class||""),html:i}),o=!1,s=function(){o||(r.addClass("removing"),o=!0,"function"==typeof t&&t(),setTimeout((function(){r.remove(),r=null}),300))};return a||(a={}),r.appendTo("body"),a.action&&r.find("button").on("click",(function(){a.action.do(),s()})),setTimeout((function(){r.removeClass("removing")})),"inf"!=n&&setTimeout((function(){s()}),n),s},bgImagesClear=function(e){e.css({"background-image":"","background-size":"cover","background-position":"center center","background-repeat":"no-repeat"})},bgImages=function(e,t){t||(t={});var n=e.find("[image]");if(n.length)try{n.imagesLoadedPN({imageAttr:!0},(function(e){"function"==typeof t.clbk&&t.clbk(e)}))}catch(e){console.error(e)}else"function"==typeof t.clbk&&t.clbk()};var imagesLoadedCache={};bgImagesClApply=function(e,t){e.setAttribute("image","*"),e.setAttribute("imageloaded","true"),e.style["background-image"]="url("+t+")",e.style["background-size"]="cover",e.style["background-position"]="center center",e.style["background-repeat"]="no-repeat"},bgImagesClApplyTemplate=function(e){return e=clearStringXss(e||""),(e=replaceArchiveInImage(e))&&imagesLoadedCache[e]?'image="*" imageloaded="true" style="background-image:url('+e+');background-size:cover;background-position:center center;background-repeat:no-repeat"':'image="'+(e||"*")+'"'},bgImagesCl=function(e,t){t||(t={});var n=e.find("[image]");if(n.length)return Promise.all(n.map(((e,t)=>new Promise((e=>{var n=t.getAttribute("image");if(!n||"*"==n)return window.rifticker.add((()=>{t.setAttribute("imageloaded","true")})),Promise.resolve();t.setAttribute("data-image",n);var a=new Image;if((n=replaceArchiveInImage(n)).includes("www.youtube.com")){const e=n.match(/\/(shorts|embed)\/(.*|)\?/)[2];n=`https://i.ytimg.com/vi/${e}/maxresdefault.jpg`}a.src=n,imagesLoadedCache[n]?(window.rifticker.add((()=>{bgImagesClApply(t,n)})),e()):a.onload=()=>{imagesLoadedCache[n]=!0,window.rifticker.add((()=>{bgImagesClApply(t,n)})),e()},a.onerror=a=>{console.error(n,a),window.rifticker.add((()=>{t.setAttribute("image","*")})),e()}}))))).then((()=>{"function"==typeof t.clbk&&t.clbk(image)}));"function"==typeof t.clbk&&t.clbk()},carousel=function(e,t,n){var a=e.find(t),i=e.find(n),r="",o=null,s=0,l=0;window.rifticker.add((()=>{i.hasClass("carousel")||i.addClass("carousel");for(var t=0;t<a.length;t++)r+='<div index="'+t+'" class="'+(t?"":"active")+'"><div></div></div>';e.append('<div class="carousel_markers">'+r+"</div>"),a.addClass("carousel_item"),(o=e.find(".carousel_markers >div")).on("click",(function(){c(this.getAttribute("index"))}))}));var c=function(e){window.rifticker.add((()=>{i[0].scrollLeft=a[e].offsetLeft}))},u=_.throttle((e=>{s=e.scrollLeft,window.rifticker.add((()=>{var e,t=function(){var e=-1;return _.find(a,((t,n)=>{if(Math.abs(s-t.offsetLeft)<1)return e=n,!0})),e}();t>-1&&(e=t)!=l&&(l=e,o&&(o.removeClass("active"),o[e].classList.add("active")))}))}),50);return i.on("scroll",(()=>{u(i[0])})),this.destroy=function(){i.off("scroll"),o.off("click"),e=null,i=null,a=null,o=null},this},nameFromScr=function(e){var t=e.split("/");return t[t.length-1]},srcToData=function(e,t){if(e.indexOf("data:")>-1)t(e);else{var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.onerror=function(){},n.open("GET",e),n.responseType="blob",n.send()}},resizeFit=function(e,t,n,a,i){var r,o,s,l=new Image,c=document.createElement("canvas"),u=c.getContext("2d");l.crossOrigin="Anonymous",l.src=e,i||(i="jpeg"),l.onload=function(){if(r=l.height/l.width,s=l.height,o=l.width,s<=n&&o<=t);else{o>t&&(o=t,s=t*r),s>n&&(o=(s=n)/r);var e=Math.max((n-s)/s,(t-o)/o);e>0&&(s*=e+1,o*=e+1)}c.width=o,c.height=s,u.drawImage(l,0,0,o,s);var d=c.toDataURL("image/"+i,.85);$(c).remove(),a(d)}},resize=function(e,t,n,a,i){var r,o,s,l=new Image,c=document.createElement("canvas"),u=c.getContext("2d");l.crossOrigin="Anonymous",l.src=e,i||(i="jpeg"),l.onload=function(){r=l.height/l.width,s=l.height,o=l.width,s<=n&&o<=t||(o>t&&(o=t,s=t*r),s>n&&(o=(s=n)/r)),c.width=o,c.height=s,u.drawImage(l,0,0,o,s);var e=c.toDataURL("image/"+i,.85);$(c).remove(),a(e)}},resizePromise=function(e,t,n,a){return new Promise((i=>{resize(e,t,n,i,a)}))},imagetojpegifneed=function({base64:e,name:t}){var n="",a="";if(t){var i=t.split(".");if(n=i[0],"png"==(a=i[1])||"jpg"==a||"jpeg"==a)return Promise.resolve({base64:e,name:t})}return new Promise(((t,a)=>{var i,r,o=new Image,s=document.createElement("canvas"),l=s.getContext("2d");o.src=e,o.onload=function(){r=o.height,i=o.width,s.width=i,s.height=r,l.drawImage(o,0,0,i,r);var e=s.toDataURL("image/jpeg",1);return $(s).remove(),t({base64:e,name:(n||makeid())+".jpg"})}}))},convertimages=function(e){return Promise.all(_.map(e,(e=>new Promise(((t,n)=>{srcToData(e,(function(e){imagetojpegifneed({base64:e}).then((({base64:e,name:n})=>{t(e)}))}))})))))},resizeNew=function(e,t,n,a){return new Promise(((i,r)=>{var o,s,l,c=new Image,u=document.createElement("canvas"),d=u.getContext("2d");c.crossOrigin="Anonymous",c.src=e,a||(a="jpeg"),c.onload=function(){o=c.height/c.width,l=c.height,s=c.width,l<=n&&s<=t||(s>t&&(s=t,l=t*o),l>n&&(s=(l=n)/o)),u.width=s,u.height=l,d.drawImage(c,0,0,s,l);var e=u.toDataURL("image/"+a,.85);return $(u).remove(),i(e)}}))},dataURLtoFile=function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],i=atob(n[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new(window.wFile||window.File)([o],t,{type:a})},toDataURL=e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>n(e)})),grayscaleImage=function(e,t){var n=new Image;n.src=e,n.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d"),i=n.width,r=n.height;e.width=i,e.height=r,a.drawImage(n,0,0);var o=a.getImageData(0,0,i,r),s=0,l=0;for(l=0;l<o.height;l++)for(s=0;s<o.width;s++){var c=4*l*o.width+4*s,u=o.data[c],d=o.data[c+1],p=o.data[c+2],f=o.data[c+3],v=(3*u+d+p)/3;o.data[c]=v,o.data[c+1]=v,o.data[c+2]=v,o.data[c+3]=f}a.putImageData(o,0,0,0,0,o.width,o.height),t&&t(e.toDataURL())}},indexArray=function(e){e||(e=0);for(var t=[],n=0;n<e;n++)t.push(n);return t},b64_to_utf8=function(e){return decodeURIComponent(window.atob(e))},convertStringToArrayBuffer=function(e){for(var t=atob(e),n=t.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a.buffer},convertArrayBufferToString=function(e){for(var t=new Uint8Array(e),n="",a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);return btoa(n)},apply=function(e,t){_.isArray(e)?_.each(e,(function(n,a){apply(e[a],t)})):t(e)},findIndex=function(e,t){var n=-1;return _.find(e,(function(e){if(n++,t(e))return!0}))||(n=-1),n},replaceEqual=function(e,t,n){var a=-1,i=_.find(e,(function(e,n){if(isEqual(e,t,!1))return a=n,e}));return a>-1&&(e.splice(a,1,n),i)},removeEqualRIObj=function(e,t){var n=-1,a=_.find(e,(function(e,a){if(isEqual(e,t,!1))return n=a,e}));return n>-1?(e.splice(n,1),{el:a,index:n}):null},removeEqual=function(e,t){var n=-1,a=_.find(e,(function(e,a){if(isEqual(e,t,!1))return n=a,e}));return n>-1&&(e.splice(n,1),a)},lazyEach=function(e){var t={after:["success","fail","after"]},n=!1,a=function(t){var n=i(e.array[t],e.each,t);n.item=e.array[t],e.action(n,t)},i=function(i,l,c){var u={};return _.each(l,(function(l,d){u[d]="function"!=typeof l||"success"!=d&&"fail"!=d&&"after"!=d?l:function(){var u=arguments,p=function(){var p=function(){e.all.success&&!n&&e.all.success(e),e.all.fail&&n&&e.all.fail(e),e.all.after&&e.all.after(e)};!function(e){var a;"fail"==e&&(n=!0),_.find(t,(function(t,n){if(_.indexOf(t,e)>-1)return a=n,!0})),a&&(o[a]||(o[a]=0),o[a]++)}(d),s=function(e){return _.reduce(e,(function(e,t){return e+t}),0)}(o),l(i,s,r,u,c),e.sync?e.array[c+1]?a(c+1):p():s==r&&p()};if(!e.syncCallbacks||s>=c||e.sync)p();else var f=setInterval((function(){s>=c&&(p(),clearInterval(f))}),10)}})),u};if(e||(e={}),e.array||(e.array=[]),e.each||(e.each={}),e.all||(e.all={}),e.each.success||(e.each.success=function(){}),e.each.fail||(e.each.fail=function(){}),e.array&&0!=e.array.length){var r=e.array.length,o={},s=0;e.all.before&&e.all.before(e),e.sync?a(0):_.each(e.array,(function(e,t){a(t)}))}else e.all.success&&e.all.success()},lazyActions=function(e,t){lazyEach({array:e,action:function(e){e.item((function(){e.success()}))},all:{success:t}})},isVal=function(e){return!_.isObject(e)||void 0!==e.v&&!_.isObject(e.v)||void 0!==e.c&&!_.isObject(e.c)},prevEl=function(e,t){var n=_.indexOf(e,t);return n>0?e[n-1]:e[0]},nextEl=function(e,t){var n=_.indexOf(e,t);return n>-1&&n<e.length-1?e[n+1]:e[e.length-1]},prevElCircle=function(e,t){var n=_.indexOf(e,t);return n>0?e[n-1]:e[e.length-1]},nextElCircle=function(e,t){var n=_.indexOf(e,t);return n>-1&&n<e.length-1?e[n+1]:e[0]},nextElH=function(e,t){var n=findIndex(e,t);return n>-1&&n<e.length-1?e[n+1]:null},firstEl=function(e){return deep(e,"length")?e[0]:null},lastEl=function(e){var t=deep(e,"length");return t?e[t-1]:null},lastEls=function(e,t){var n=e.length;return(t=Math.min(t,n))?_.filter(e,(function(e,a){if(a>=n-t)return e})):[]},lastelements=function(e,t,n){t||(t=100),n||(n=0);var a=e.length-t;return a>n&&(e=e.splice(a)),e},firstEls=function(e,t){var n=e.length;return(t=Math.min(t,n))?_.filter(e,(function(e,n){if(n<t)return e})):[]},getRandomValues=function(e){for(var t=0;t<e.length;t++)e[t]=256*Math.random()|0;return e},equalhash=function(e,t){return $.md5(JSON.stringify(e))===$.md5(JSON.stringify(t))},rot13=function(e){var t=new RegExp("[a-z]","i"),n="A".charCodeAt(0),a="Z".charCodeAt(0),i="";e=e.toUpperCase();for(var r=0;r<e.length;r++)i+=t.test(e[r])?String.fromCharCode((e.charCodeAt(r)-n+13)%(a-n+1)+n):e[r];return i},getMethods=function(e){var t={};for(prop in e)"function"==typeof e[prop]&&(t[prop]=e[prop]);return t},getVars=function(e){var t={};for(prop in e)e.hasOwnProperty(prop)&&(t[prop]=e[prop]);return t},toDeepKey=function(e){return _.toArray(e).sort().join(".")},deepInsert=function(e,t,n){if(t){var a=t.split("."),i=a[0];if(1!=a.length)return e[i]||(e[i]={}),a.splice(0,1),deepInsert(e[i],a.join("."),n);e[i]=n}},isEqual=function(e,t,n){void 0===n&&(n=!0);var a=!n;return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&((typeof e==typeof t||"function"==typeof t)&&("function"==typeof t?t(e):_.isObject(t)?_.isArray(t)?(_.each(t,(function(t,i){var r=isEqual(e[i],t,n);r=!!r,a=a||r})),a):!!_.isObject(t)&&(_.each(t,(function(t,i){var r=isEqual(e[i],t,n);r=!!r,a=n?a||r:a&&r})),a):t==e))},boolnum=function(e){return!(0==e||"0"==e||!e)},toFixed=function(e,t){return Number(e.toFixed(t))},dround=function(e,t){var n=+"1".padEnd(t+1,"0");return Math.round(e*n)/n},ParametersLive=function(e,t,n){t&&(n||(n={}),_.each(e,(function(e){if(e&&e.type){var a=t.find('[pid="'+e.id+'"]');if(a){if(e.el=a,a.find(".operatorselect").off("change"),a.find(".operatorselect").on("change",(function(){e.operator=$(this).val(),e.set("___nochange")})),"cash"==e.type)return a.find("input").on("change",(function(){var t=$(this).val();e.isValid(t)?a.removeClass("error"):a.addClass("error"),e.set(t)})),void a.find("input").on("keyup",(function(){var t=$(this).val();a.find(".convertValue").html(e.app.store.cash.toBTC(t,e.currency,!0))}));if("cashrange"==e.type)return a.find("input").on("change",(function(){var t=$(this).val(),n=$(this).attr("index");e.isValid(t)?a.removeClass("error"):a.addClass("error"),e.set(t,n)})),void a.find("input").on("keyup",(function(){$(this).val(),$(this).attr("index")}));if("numberrange"==e.type)return void a.find("input").on("change",(function(){var t=$(this).val(),n=$(this).attr("index");e.isValid(t)?a.removeClass("error"):a.addClass("error"),e.set(t,n)}));if("html"==e.type&&!_Node)return a.trumbowyg({btns:[["bold","italic"],["link"]]}),void a.on("tbwblur",(function(){var t=a.trumbowyg("html");e.set(t)}));if("image"==e.type||"file"==e.type){var i=a.find(".addImage"),r=a.find(".imagesContainer"),o=a.find(".imageContainer");e.upload.el=i,e.onLive&&e.onLive(o,e),e.upload.beforeUpload=function(t,n){e.previewTemplate&&r.append(e.previewTemplate({file:t,processId:n}))},e.upload.onUpload=function(t,n){if(e.previewTemplate){var a=deep(t,e.previewPath||""),i=r.find('[processId="'+n+'"]'),o=r,s="append";i.length>0&&(o=i,s="replaceWith"),o[s](e.previewTemplate({src:a,processId:n,options:e.upload})),i=r.find('[processId="'+n+'"]'),e.onLive(i,e)}e.set(a),e.upload._onUpload&&e.upload._onUpload(t)},initUpload(e.upload)}if("valuesmultitree"==e.type){var s=function(){a.find(".checkbox").prop("checked",!1);var t=_.map(e.value,(function(t){return e.treemap[t]}));e.every({group:function(e,t,n,i){a.find('[value="'+e.id+'"]').prop("checked",!0),e.active&&i()},value:function(e,t,n){a.find('[value="'+e.id+'"]').prop("checked",!0)}},t)},l=function(t,n){var a=e.treemap[t];c(a,n)},c=function(t,n){if(t){void 0===n&&(n=!t.active),t.active=n;var i=a.find('[groupid="'+t.id+'"]'),r=i.find(".vmt_group_params"),o=i.attr("level");t.active?(r.html(e.renderLevel(t.values,o+1)),i.removeClass("hidden"),i.addClass("active")):(r.html(""),i.removeClass("active"))}},u=function(){_.each(e.treemap,(function(e){e.active=!1}))};return a.find(".vmt_showMore").on(clickAction(),(function(){a.addClass("showedMore")})),a.find(".vmt_hideMore").on(clickAction(),(function(){a.removeClass("showedMore")})),a.find(".autoSearch").on("keyup",(function(t){var n=$(this).val();if(n&&n.length>1)if(13==(t.keyCode||t.which)){var i=e.treemap[n];if(i){removeEqual(e.value,i.id),a.find('input[value="'+i.id+'"]').prop("checked",!0).change(),$(this).val(""),u();var r=e.renderLevel(null,0);a.find(".chinputsv").html(r),s()}}else{u();var o=e.searchValues(n),l={};_.each(o,(function(e){_.each(e.parents,(function(e){l[e.id]=!0}))}));r=e.renderLevel(null,0,{group:function(e){if(l[e.id])return e.active=!0,!0},value:function(e){if(o[e.id])return!0}});a.find(".chinputsv").html(r),s()}else{u();r=e.renderLevel();a.find(".chinputsv").html(r),s()}})),a.on(clickAction(),".vmt_panel_wrapper",(function(){var e=$(this).closest("[groupid]").attr("groupid");l(e),s()})),a.on("change",'input[type="checkbox"]',(function(){var t,n=$(this).attr("value"),a=$(this).is(":checked")?1:0,i=e.treemap[n],r={},o={},l=function(){i.parent&&e.childselected(i.parent,r,o)&&(i=i.parent,(r={})[i.id]=!0,l())},c=function(e){e.parent&&(o[e.parent.id]=!0,c(e.parent))};a?(r[i.id]=!0,l(),i.values&&e.every({group:function(e,t,n,a){o[e.id]=!0,a()},value:function(e){o[e.id]=!0}},i.values)):(function(t){if(t.parent){var n=e.parentselected(t.parent,[],[]);n&&(o[n.id]=!0,_.each(t.parent.values,(function(e){e.id!=t.id&&(r[e.id]=!0)})))}}(i),o[i.id]=!0,c(i));var u=e.composeValues(r,o);t=_.map(u,(function(e,t){return t})),e.set(t),s()})),void s()}if("valuesmulti"==e.type)return a.find("input").on("change",(function(){var t=$(this).attr("val"),n=$(this).is(":checked")?1:0;e.set(t,n),a.removeClass("error")})),a.find(".vm_showMore").on(clickAction(),(function(){a.addClass("showedMore")})),void a.find(".vm_hideMore").on(clickAction(),(function(){a.removeClass("showedMore")}));if("valuescustom"==e.type||"values"==e.type||"valuesmultibig"==e.type){var d=null,p=a.find(".vc_inputWrapper input"),f=function(){return"valuesmultibig"==e.type?a.find(".vc_valuecustom"):a},v=function(){f().toggleClass("opened"),a.find(".vc_value").removeClass("hidden"),f().hasClass("opened")?($("html").on(clickAction(),m),window.addEventListener("scroll",h),a.find(".vc_selectInput").scrollTop(0)):h()},h=function(){d&&p.val(d),f().removeClass("opened"),$("html").off(clickAction(),m),window.removeEventListener("scroll",h)},m=function(e){0===a.has(e.target).length&&f().hasClass("opened")&&h()};e.disabled||(("valuescustom"==e.type||e.autoSearch)&&(a.find(".vc_iconWrapper").on(clickAction(),(function(){v(),e.autoSearch&&setTimeout((function(){p.focus(),d=p.val(),p.val("")}),200)})),a.find(".vc_inputWrapperClick").on(clickAction(),(function(){v()})),a.find("input").on("focus",(function(){$(this).select()}))),"values"!=e.type||e.autoSearch||a.find(".vc_textInput").on(clickAction(),(function(){if(window.cordova&&window.plugins.actionsheet){var t=_.map(e.possibleValues,(t=>({label:e.labelByValue(t),value:t})));app.mobile.menu(_.map(t,(e=>e.label))).then((e=>{d=null,p.val(t[e].value),p.change()})).catch((e=>{console.error("e",e)}))}else v()})),a.find(".vc_value").on("click",(function(){d=null;var e=$(this).attr("value");p.val(e),p.change(),f().removeClass("opened"),f().removeClass("error")})),a.find(".vc_selected_value_icon").on("click",(function(){var i=$(this).closest(".vc_selected_value").attr("value");e.set(i),a.parent().html(e.input()),ParametersLive([e],t,n)})),e.autoSearch&&(p.focus((function(){this.select()})),p.on("keyup",(function(e){d=null;var t=$(this).val().toLowerCase();if(f().hasClass("opened")||v(),13==(e.keyCode||e.which)){var n=a.find(".vc_value:not(.hidden)");return n.length>0&&(t=n.attr("value")),$(this).val(t),$(this).change(),!1}t?$.each(a.find(".vc_value"),(function(){var e=$(this),n=e.attr("value").toLowerCase(),a=e.text().toLowerCase();n.indexOf(t)>-1||a.indexOf(t)>-1?e.removeClass("hidden"):e.addClass("hidden")})):a.find(".vc_value").removeClass("hidden")}))));var g=function(){var i=$(this),r=i.val();if(e.autoSearch){var o=e.isValid(r);if(r&&!o)return void setTimeout((function(){i.val()==r&&e.require&&($(i).val(e.defaultValue),$(i).change())}),150);o&&(r=o)}e.set(r);var s=e.labelByValue(r);if(e.labelToInput)return i.val(e.labelToInput(s)),a.parent().html(e.input()),void ParametersLive([e],t,n);i.val(s),"valuesmultibig"==e.type&&(a.parent().html(e.input()),ParametersLive([e],t,n)),a.removeClass("error")};return p.on("change",g),void(e.onType&&p.on("keyup",g))}if("location"==e.type)return e.options.inputBinding||(e.options.inputBinding={}),e.options.inputBinding.locationNameInput=a.find(".place input"),e.options.inputBinding.radiusInput=a.find(".radius select"),e.options.onchanged=function(t,n,a){var i=$(this).locationpicker("map"),r=i.location.addressComponents,o={};_.clone(t),o.latitude=t.latitude,o.longitude=t.longitude,o.radius=n,o.country=r.country,o.zip=r.postalCode,o.place=i.location.formattedAddress,e.set(o)},e.options.location={latitude:e.value.latitude,longitude:e.value.longitude},e.options.enableAutocomplete=!0,e.options.autocompleteOptions={types:["(regions)"],componentRestrictions:{country:"us"}},e.options.enableAutocompleteBlur=!0,e.options.radius=e.value.radius,e.options.radius>5e3&&(e.options.zoom=10),e.options.radius>1e4&&(e.options.zoom=9),e.options.radius>2e4&&(e.options.zoom=8),e.options.radius>5e4&&(e.options.zoom=7),e.options.radius>1e5&&(e.options.zoom=6),e.options.radius>25e4&&(e.options.zoom=5),e.options.radius>=5e5&&(e.options.zoom=4),a.find(".map").locationpicker(e.options),void a.find(".locationInputUse input").on("change",(function(){var t=!!$(this).is(":checked");a.toggleClass("notused"),t?(a.find(".place input").removeAttr("disabled"),a.find(".radius select").removeAttr("disabled")):(a.find(".place input").attr("disabled","disabled"),a.find(".radius select").attr("disabled","disabled")),e.set({using:t})}));if("color"==e.type&&a.simpleColor({boxWidth:60,cellWidth:30,cellHeight:30,columns:4,cellMargin:2,colors:e.possibleValues,onSelect:function(t){e.set(t)}}),"date"==e.type){a.pickadate({today:"",onSet:function(t){if(t.select){var n=dateToStrSmall(new Date(t.select));e.set(n)}else e.set()},selectYears:!0,selectMonths:!0,format:"dddd, dd mmm, yyyy",formatSubmit:"yyyymmdd",min:e.options.min||void 0,max:e.options.max||void 0});var b=a.pickadate("picker");e.value&&b.set("select",strToDateArr(e.value))}if("daterange"==e.type){var y,w,x=function(){e.value[0]?w.set("min",strToDateArr(e.value[0])):w.set("min",e.options.min||!1),e.value[1]?y.set("max",strToDateArr(e.value[1])):y.set("max",e.options.max||!1)},k={selectYears:!0,selectMonths:!0,today:"",format:"dddd, dd mmm, yyyy",formatSubmit:"yyyymmdd",min:e.options.min||void 0,max:e.options.max||void 0},C=_.clone(k),S=_.clone(k),I=function(t,n){var a="";t.select&&(a=dateToStrSmall(new Date(t.select))),void 0===t.select&&void 0===t.clear||(e.set(a,n),x())};return C.onSet=function(e){I(e,0)},S.onSet=function(e){I(e,1)},a.find(".from").pickadate(C),a.find(".to").pickadate(S),y=a.find(".from").pickadate("picker"),w=a.find(".to").pickadate("picker"),e.value[0]&&y.set("select",strToDateArr(e.value[0])),e.value[1]&&w.set("select",strToDateArr(e.value[1])),void x()}if("hours"==e.type)return void a.find(".dayrow select").on("change",(function(){var t=$(this).val(),n=$(this).closest(".trange").attr("index"),i=$(this).closest(".dayrow").attr("day");"false"==t&&(t=null),e.set(t,i,n),a.removeClass("error")}));if("category"==e.type)return void a.on(clickAction(),(function(){e.app.nav.api.load({open:!0,id:"postSelectCategory",inWnd:!0,essenseData:{header:"Select Category",path:a.attr("parent"),validation:"canCreateItem",onSelectCategory:function(t){e.set(t.path())}}})}));if("phone"==e.type&&a.mask("(999) 999-9999"),"string"==e.type&&e.autoSearch){var T=a.closest(".vc_autosearchInput").find(".placeholderghost"),L="&nbsp;";a.on("keydown",(function(e){var t=$(this),n=t.val();39==(e.keyCode||e.which)?(n=T.html())!=L&&(T.html(L),t.val(T.attr("value")),t.change()):T.html(n||L)}));var A=function(t){var n=$(this),a=n.val();T.html(a||L),a&&13!=(t.keyCode||t.which)&&e.autoSearch(a,e,(function(e){n.val()==a&&(T.html(a||L),a&&e&&0==e.toLowerCase().indexOf(a.toLowerCase())&&T.html(a+e.substr(a.length)).attr("value",e))}))};a.on("keyup",A),a.on("focus",A),a.on("blur",(function(){T.html(L)}))}g=function(){var t=$(this).val();"boolean"==e.type&&(t=$(this).is(":checked")?1:0),"email"==e.type&&"_@_._"==t&&(t=""),"nickname"==e.type&&(t=pstranslit(t),$(this).val(t)),"number"==e.type&&(t=isNaN(Number(t))?"":dround(t,deep(e,"format.Precision")||0),$(this).val(t)),e.isValid(t)?a.removeClass("error"):a.addClass("error"),e.set(t)};a.on("change",g),e.onFocus&&a.on("focus",(function(){e.onFocus(a,e)})),e.onType&&a.on("keyup",g),"number"==e.type&&a.on("change",(function(t){if("."==t.originalEvent.key||","==t.originalEvent.key||"Backspace"==t.originalEvent.key)return!1;var n=$(this).val();if(!n||"0"==n)return!1;if(n.length>1){"0"==n[0]&&(n=n.substr(1));var a=n[n.length-1],i=n.indexOf(".")>-1||n.indexOf(",")>-1;if("."==a||"0"==a&&i||","==a)return!1}if(!isNaN(Number(n))){var r=deep(e,"format.max"),o=deep(e,"format.min");void 0!==r&&r<n&&(n=r),void 0!==o&&o>n&&(n=o),n=dround(n,deep(e,"format.Precision")||0),$(this).val(n)}}))}}})),t.find("input").inputmask&&$.each(t.find("input"),(function(){var e=$(this);e.attr("data-inputmask")&&!e.attr("notmasked")&&e.inputmask({})})))};var pstranslit=function(e){for(var t="",n={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ь":"","ы":"y","ъ":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"E","Ж":"Zh","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ь":"","Ы":"Y","Ъ":"","Э":"E","Ю":"Yu","Я":"Ya"},a=0;a<e.length;++a)null==n[e[a]]?t+=e[a]:t+=n[e[a]];return t};Parameter=function(e){e||(e={});var t=this;return t.type=(e.type||"NUMBER").toLowerCase(),t.name=e.name||"",t.id=e.id||makeid(),t.defaultValue=e.defaultValue,t.order=e.order||0,t.require=e.require||!1,t.options=e.options||{},t.canClear=!0,t.patterns=e.patterns||[],!1===e.canClear&&(t.canClear=e.canClear),t.possibleValues=e.possibleValues||[],t.possibleValuesLabels=e.possibleValuesLabels||[],t.value=e.value||null,t.defaultValuesTemplate=e.defaultValuesTemplate||null,t.defaultValueTemplate=e.defaultValueTemplate||null,t.labelToInput=e.labelToInput||null,t.currency=e.currency||null,t.disabled=e.disabled,t.app=e.app,t.upload=e.upload,t.uploadTemplate=e.uploadTemplate,t.previewTemplate=e.previewTemplate,t.previewPath=e.previewPath,t.onLive=e.onLive,t.hidden=e.hidden||!1,t.groupId=e.groupId||0,t.dbId=e.dbId||null,t.convert=e.convert||null,t.dbConvert=e.dbConvert||null,t.dbType=e.dbType||null,t.dbFunc=e.dbFunc||"equal",t._onChange=e._onChange||null,t.onType=e.onType||null,t.onFocus=e.onFocus||null,t.description=e.description||"",t.format=e.format||{},t.placeholder=e.placeholder||"",t.autoSearch=e.autoSearch||!1,t.html=e.html||!1,t.operatorSelect=e.operatorSelect||null,t.operator=e.operator||null,t.if=e.if||null,t.text=e.text||null,t.type.indexOf("range")>-1&&(t.dbFunc="fromto"),t.removeImage=function(e){new Img({type:t.upload.data.essense,name:e.value,app:t.app,refId:t.upload.data.essense.RefID}).remove((function(n){removeEqual(t.value,e.value),e.clbk&&e.clbk(n)}))},t.isValid=function(e){void 0===e&&(e=t.value);var n=t.mask();if("number"!=t.type&&"cash"!=t.type||(e=Number(e).toFixed(deep(t,"format.Precision")||0)),"label"==t.type)return!0;if("hours"==t.type)return!0;if("color"==t.type)return!0;if("date"==t.type||"daterange"==t.type)return!0;if("html"==t.type||"text"==t.type)return!(t.require&&!e);var a=!0;if(_.each(t.patterns,(function(t){t.test(e)||(a=!1)})),!a)return!1;if(("values"==t.type||"valuesmultibig"==t.type)&&t.autoSearch){var i=_.find(t.possibleValues,(function(t){if(t.toLowerCase()==e.toLowerCase())return!0}));return!!i&&i.toUpperCase()}if("boolean"==t.type)return!0;if(!(t.require||e&&0!=e))return!0;var r=Inputmask.isValid(e.toString(),n);return!t.require||e&&0!=e||(r=!1),"number"!=t.type&&"cash"!=t.type||_.isNumber(Number(e))||(r=!1),r},t.openGallery=function(e){e||(e={});var n=_.map(t.value,(function(e){return new Img({type:t.upload.data.essense,name:e,app:t.app})}));e=_.extend(e,{images:n,essense:t.upload.data.essense,size:"full",smallSize:"thumbnail",edit:!0}),t.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:e})},t.default=function(){var e={string:"",number:0,percent:0,dollars:0,text:"",category:0,html:"",location:{country:"US",latitude:40.73387539871257,longitude:-73.98949970898434,place:"New York, NY 10003, USA",radius:1e4,zip:"10003",using:!0},valuesmulti:[],values:"",boolean:!1,cash:0,image:[],numberrange:["",""],cashrange:["",""],hours:{},valuesmultibig:[],valuescustom:"",valuesmultitree:[],phone:"",color:"#1E3DF7",date:"",daterange:["",""],email:"",stringany:"",nickname:"",image:"",password:"",file:""};return void 0!==t.defaultValue?t.defaultValue:t.type&&void 0!==e[t.type]?e[t.type]:0},t.renders={category:function(e){var n=t.app.store.categories.find(t.value||"0");return n?n.htmlpath():""},boolean:function(e){var n="",a="";return t.value&&"0"!=t.value&&(a="checked"),n+='<input elementsid="'+t.id+'" pid="'+t.id+'" type="checkbox" disabled id="checkbox_'+t.id+'"'+a+' class="checkbox nolabel '+t.type+'" />',n+='<label for="checkbox_'+t.id+'"></label>'},numberrange:function(e,n){return t.value[n]},cashrange:function(e,n){return t.value[n]}},t.mask=function(e){t.format;var n=!1,a={rightAlign:!1,autoUnmask:!0,showMaskOnHover:!1,showMaskOnFocus:!1,clearMaskOnLostFocus:!0};if("number"==t.type||"cash"==t.type)return null;if("numberrange"!=t.type&&"cashrange"!=t.type||(a.alias="numeric",a.nullable=!0,a.groupSeparator=",",a.autoGroup=!0,a.digits=deep(t,"format.Precision"),n=!0),"email"==t.type&&(a.alias="email",n=!0),"string"==t.type){var i=[0,""];t.require&&(i[0]=1),t.format.Length&&(i[1]=t.format.Length),a.regex="[а-яА-Яa-zA-Z0-9 ,-.&]{"+i.join(",")+"}",n=!0}if("nickname"==t.type){i=[0,""];t.require&&(i[0]=1),t.format.Length&&(i[1]=t.format.Length),a.regex="[а-яА-Яa-zA-Z0-9_]{"+i.join(",")+"}",n=!0}if("stringany"==t.type){i=[0,""];t.require&&(i[0]=1),t.format.Length&&(i[1]=t.format.Length),a.regex="[^|]{"+i.join(",")+"}",n=!0}return n?(e&&(a='data-inputmask="'+(a=(a=(a=JSON.stringify(a)).substring(1)).substring(0,a.length-1).replace(/"/g,"'"))+'"'),a):e?"":null},t.labelByValue=function(e){var n=_.indexOf(t.possibleValues,e);return n>-1?t.possibleValuesLabels[n]:e},t.operatorInput=function(){if(!t.operatorSelect)return"";var e='<div class="operator"><select class="operatorselect">';return _.each(t.operatorSelect,(function(n){var a="";n.id==t.operator&&(a="selected"),e+="<option "+a+' + value="'+n.id+'">'+n.name+"</option>"})),e+="</select></div>"},t.input=function(e){var n="";t.disabled&&(n='disabled="disabled"'),e||(e={});var a=t.mask(!0);if(("image"==t.type||"file"==t.type)&&t.uploadTemplate&&t.upload&&t.previewTemplate)return t.uploadTemplate(t);if("location"==t.type){var i="checked",r="",o="";return t.value.using||(i="",r="notused",o='disabled="disabled"'),'<div pid="'+t.id+'" class="locationInputWrapper '+r+'"><div class="table locationInputs"><div class="locationInputUse"><input elementsid="locationInputUse" type="checkbox" id="checkbox_'+t.id+'_location" '+i+' class="checkbox nolabel" /><label for="checkbox_'+t.id+'_location"></label></div><div class="locationInput place"><input elementsid="locationInputPlace" type="text" notmasked="notmasked" placeholder="Name Of Place"></div><div class="locationInput radius"><select><option value="1000">1 mi</option><option value="5000">5 mi</option><option value="10000">10 mi</option><option value="20000">20 mi</option><option value="50000">50 mi</option><option value="100000">100 mi</option><option value="500000">500 mi</option></select></div></div><div class="mapwr"><div class="map"></div><div class="mapbwoverlay"></div></div></div>'}if("valuescustom"==t.type||"values"==t.type||"valuesmultibig"==t.type){o="";var s=t.value;"valuesmultibig"==t.type&&(s=""),"values"!=t.type||t.autoSearch||(o="disabled"),t.disabled&&(o="disabled"),"values"!=t.type&&"valuescustom"!=t.type||(s=t.labelByValue(t.value),t.labelToInput&&(s=t.labelToInput(s)));var l="";l+='<div class="vc_iconWrapper">',l+='<div class="vc_iconSpinWrapper">',l+='<i class="fa fa-caret-down" aria-hidden="true"></i>',l+="</div>",l+="</div>";var c="";return"valuesmultibig"==t.type?(c+='<div class="vc_valuecustom_multibig" pid="'+t.id+'">',c+='<div class="vc_valuecustom">'):c+='<div class="vc_valuecustom" pid="'+t.id+'">',c+='<div class="vc_textInput table">',t.format.right&&(c+=l),c+='<div class="vc_inputWrapper '+(o?"vc_inputWrapperClick":"")+'">',c+='<input elementsid="vs_input" '+o+'  type="text" value="'+s+'" placeholder="'+t.placeholder+'">',o&&(c+='<div class="displaceholder"></div>'),c+="</div>",t.format.right||(c+=l),c+="</div>",c+='<div class="vc_selectInput customscroll">',t.defaultValuesTemplate?c+=t.defaultValuesTemplate(t):(t.defaultValue||(c+='<div class="vc_value" value="">',c+="&nbsp;",c+="</div>"),_.each(t.possibleValues,(function(e,n){if(!("valuesmultibig"==t.type&&_.indexOf(t.value,e.toUpperCase())>-1)){var a=t.labelByValue(e);c+='<div class="vc_value" value="'+e+'">',t.defaultValueTemplate?c+=t.defaultValueTemplate(a,e,t):c+=a,c+="</div>"}}))),c+="</div>",c+="</div>","valuesmultibig"==t.type&&(c+='<div class="vc_selected_values">',_.each(t.value,(function(e,n){var a=t.labelByValue(e);c+='<div class="vc_selected_value table" value="'+e+'">',c+='<div class="vc_selected_value_icon">',c+='<i class="fas fa-times-circle"></i>',c+="</div>",c+='<div class="vc_selected_value_value">',c+=a,c+="</div>",c+="</div>"})),c+="</div>",t.value.length>1&&(c+=t.operatorInput()),c+="</div>"),c}if("text"==t.type||"html"==t.type)return c='<textarea elementsid="textarea_'+t.id+'" placeholder="'+t.placeholder+'" notmasked="notmasked" pid="'+t.id+'" class="'+t.type+' ">'+t.render(!0)+"</textarea>";if("category"==t.type){var u=t.app.store.categories.find(t.value||"0");if(u&&u.canCreateItem())var c='<div parent="'+u.parent.path()+'" pid="'+t.id+'" class="editCategoryPath">'+u.htmlpath()+"</div>";else var c='<button pid="'+t.id+'" class="selectCategoryPath">Select Category</button>';return c}if("valuesmulti"==t.type){var c='<div class="vm_valuesmulti" pid="'+t.id+'">';return _.each(t.possibleValues,(function(e,n){var a="",i=e;t.possibleValuesLabels[n]&&(i=t.possibleValuesLabels[n]),t.options.valueTemplate&&(i=t.options.valueTemplate(e,i)),_.indexOf(t.value,e)>-1&&(a="checked"),5==n&&(c+='<div class="vm_showMore">Show More</div>',c+='<div class="vm_hidden">',c+='<div class="vm_hideMore">Hide</div>'),c+='<div class="vm_value">',c+='<input elementsid="checkbox_'+t.id+"_"+e+'" val="'+e+'" type="checkbox" id="checkbox_'+t.id+"_"+e+'"'+a+' class="checkbox nolabel '+t.type+'" />',c+='<label for="checkbox_'+t.id+"_"+e+'">'+i+"</label>",c+="</div>"})),t.possibleValues.length>=6&&(c+='<div class="vm_hideMore">Hide</div>',c+="</div>"),c+="</div>"}if("valuesmultitree"==t.type){var d=null,c='<div class="vmt_valuesmultitree" pid="'+t.id+'">';if(t.autoSearch&&(c+='<div class="autoSearchWrapper"><input elementsid="autoSearch_input"  type="text" class="autoSearch" placeholder="Search Code"></div>'),e.init){var p={},f={};_.each(t.value,(function(e){var n=t.treemap[e];n&&(f[e]=n,_.each(n.parents,(function(e){p[e.id]=!0})))})),d={group:function(e){if(p[e.id])return e.active=!0,!0},value:function(e){return!0}}}t.renderLevel=function(e,n,a){var i="";i+='<div class="nextlevel">';return t.every({group:function(e,n,r,o){var s=e.name,l=e.active||a&&a.group(e);t.options.valueTemplate&&(s=t.options.valueTemplate(e)),(l||!a||a.value(e))&&(i+='<div class="vmt_group " level="'+n+'" groupid="'+e.id+'">',i+='<div class="vmt_name table">',i+='<div class="vmt_checkbox">',i+='<input elementsid="checkbox_'+t.id+e.id+'" type="checkbox" value="'+e.id+'" id="checkbox_'+t.id+e.id+'" class="checkbox" />',i+='<label for="checkbox_'+t.id+e.id+'">'+s+"</label>",i+="</div>",i+='<div class="vmt_panel">',i+='<div class="vmt_panel_wrapper">',i+='<i class="fa fa-angle-up" aria-hidden="true"></i>',i+="</div>",i+="</div>",i+="</div>",i+='<div class="vmt_group_params">',l&&(i+='<div class="nextlevel">',o(),i+="</div>"),i+="</div>",i+="</div>")},value:function(e,n,r){if(!a||a.value(e)){var o=e.name;t.options.valueTemplate&&(o=t.options.valueTemplate(e)),i+='<div class="vmt_value" level="'+n+'" groupid="'+e.id+'">',i+='<div class="vmt_checkbox">',i+='<input elementsid="checkbox_'+t.id+e.id+'" type="checkbox" value="'+e.id+'" id="checkbox_'+t.id+e.id+'" class="checkbox" />',i+='<label for="checkbox_'+t.id+e.id+'">'+o+"</label>",i+="</div>",i+="</div>"}}},e,n),[i+="</div>",!1]};var v=t.renderLevel(null,0,d);return c+='<div class="chinputsv">',c+=v[0],c+="</div>",c+="</div>"}if("boolean"==t.type){var c="";i="";return t.value&&"0"!=t.value&&(i="checked"),c+='<input elementsid="'+t.id+'" pid="'+t.id+'" type="checkbox" id="checkbox_'+t.id+'"'+i+' class="checkbox nolabel '+t.type+'" />',c+='<label for="checkbox_'+t.id+'"></label>'}if("cash"==t.type){var c='<div class="cashWrapper" pid="'+t.id+'">';return c+='<div class="inputCashWrapper">',c+='<input elementsid="input_cash" '+a+' class="'+t.type+' input"  value="'+t.render(!0)+'">',c+="</div>",t.currency&&(c+='<div class="convertCashWrapper">',c+='<div class="convertValue">'+t.app.store.cash.toBTC(t.value,t.currency,!0)+"</div>",c+="</div>"),c+="</div>"}if("cashrange"==t.type){c='<div class="cashrangeWrapper" pid="'+t.id+'">';return c+='<div class="inputsCashrangeWrapper">',c+='<div class="inputCashrangeWrapper">',c+='<input  elementsid="input_cashrange" index="0" '+a+' class="'+t.type+' input" placeholder="From" value="'+t.render(!0,0)+'">',c+="</div>",c+='<div class="inputCashrangeWrapper">',c+='<input  elementsid="input_cashrange_2" index="1" '+a+' class="'+t.type+' input" placeholder="To" value="'+t.render(!0,1)+'">',c+="</div>",c+="</div>",t.currency&&(c+='<div class="convertsCashrangeWrapper">',c+='<div class="convertCashrangeWrapper">',c+='<div class="convertValue" index="0">'+t.app.store.cash.toBTC(t.value[0],t.currency,!0)+"</div>",c+="</div>",c+='<div class="convertCashrangeWrapper">',c+='<div class="convertValue" index="1">'+t.app.store.cash.toBTC(t.value[1],t.currency,!0)+"</div>",c+="</div>",c+="</div>"),c+="</div>"}if("numberrange"==t.type){c='<div class="numberrangeWrapper" pid="'+t.id+'">';return c+='<div class="inputNumberrangeWrapperFrom">',c+='<input  elementsid="input_numberrangefrom" index="0" '+a+' class="'+t.type+' input" placeholder="From" value="'+t.render(!0,0)+'">',c+="</div>",c+='<div class="inputNumberrangeWrapperTo">',c+='<input  elementsid="input_numberrangeto" index="1" '+a+' class="'+t.type+' input" placeholder="To" value="'+t.render(!0,1)+'">',c+="</div>",c+="</div>"}if("color"==t.type)return c='<input  elementsid="input_cashrange" notmasked="notmasked" pid="'+t.id+'" class="simpleColor input" value="'+t.value+'">';if("daterange"==t.type){c='<div class="numberrangeWrapper" pid="'+t.id+'">';return c+='<div class="inputNumberrangeWrapperFrom">',c+='<input  elementsid="input_numberrangefrom_"'+t.id+' notmasked="notmasked" pid="'+t.id+'" class="datePicker input from" placeholder="From">',c+="</div>",c+='<div class="inputNumberrangeWrapperTo">',c+='<input  elementsid="input_numberrangeto_"'+t.id+' notmasked="notmasked" pid="'+t.id+'" class="datePicker input to" placeholder="To">',c+="</div>",c+="</div>"}return"daterange"==t.type?c='<input  elementsid="input_numberrange_"'+t.id+' notmasked="notmasked" pid="'+t.id+'" class="datePicker input">':"phone"==t.type?c='<input  elementsid="input_numberrange_"'+t.id+' notmasked="notmasked" pid="'+t.id+'" class="'+t.type+' input" value="'+t.render(!0)+'" type="text">':t.autoSearch?c='<div class="vc_autosearchInput">\t\t   <div class="placeholder"><div class="placeholderghost">&nbsp;</div></div>\t\t   <div class="autosearchInputCnt">\t\t   <input  elementsid="input_autosearch_"'+t.id+' notmasked="notmasked" '+a+' pid="'+t.id+'" class="'+t.type+' input" placeholder="'+(t.placeholder||"")+'" value="'+t.render(!0)+'" type="text">\t\t   </div></div>':"password"==t.type?c='<input  elementsid="input_numberrangepassword_"'+t.id+" "+n+' pid="'+t.id+'" class="'+t.type+' input" placeholder="'+(t.placeholder||"")+'" value="'+t.render(!0)+'" type="password">':"label"==t.type?`<div elementsid="${t.id}" ${n} ${a} pid="${t.id}" class="simpleColor inpLabel">${t.value}</div>`:"file_select"==t.type?`\n\t\t\t   <input  elementsid="input_file_select_${t.id}" ${n} ${a} pid="${t.id}" class="${t.type} input" placeholder="${t.placeholder||""}" value="${t.render(!0)}" type="text">\n\t\t\t   <button elementsid="button_file_select_${t.id}" ${n} ${a} pid="${t.id}_Selector" class="simpleColor inpButton btn_select">...</button>\n\t\t   `:"button"==t.type?`<button elementsid="button_${t.id}" ${n} ${a} pid="${t.id}" class="simpleColor inpButton" value="${t.value}">${t.text}</button>`:"number"==t.type?`<input  elementsid="button_${t.id}_2" ${n} step="${deep(t,"format.Step")||""}" min="${deep(t,"format.Min")||""}" max="${deep(t,"format.Max")||""}" pid="${t.id}" class="${t.type} input" placeholder="${t.placeholder||""}" value="${t.render(!0)}" type="number">`:c=`<input  elementsid="button_${t.id}_2" ${n} ${a||""} pid="${t.id}" class="${t.type} input" placeholder="${t.placeholder||""}" value="${t.render(!0)}" type="text">`},t.render=function(e,n){return t.renders[t.type]?t.renders[t.type](e,n):_.isArray(t.value)&&void 0!==n?t.value[n]||"":t.value},t.sets={hours:function(e,n,a){t.value[n]||(t.value[n]={start:null,end:null}),t.value[n][a]=e},location:function(e){e?(e.country&&(t.value.country=e.country),e.latitude&&(t.value.latitude=e.latitude),e.longitude&&(t.value.longitude=e.longitude),e.place&&(t.value.place=e.place),e.radius&&(t.value.radius=e.radius),e.zip&&(t.value.zip=e.zip),void 0!==e.using&&(t.value.using=e.using)):t.value=t.default()},number:function(e){e=Number(e),t.value=e},numberrange:function(e,n){""!==e&&(e=Number(e)),_.isNumber(e)||(e=""),t.value[n]=e},cash:function(e){e=Number(e),_.isNumber(e)||(e=null),t.value=e},cashrange:function(e,n){""!==e&&(e=Number(e)),_.isNumber(e)||(e=""),t.value[n]=e},daterange:function(e,n){t.value[n]=e},image:function(e){"array"!=typeof e&&e?t.value.push(e):t.value=e},valuesmulti:function(e){_.indexOf(t.value,e)>-1?removeEqual(t.value,e):t.value.push(e)},valuesmultibig:function(e){_.indexOf(t.value,e)>-1?removeEqual(t.value,e):t.value.push(e)},valuesmultitree:function(e){t.value=e}},t.set=function(e,n,a){"___nochange"==e||(void 0===e?t.value=t.default():(t.calculation&&(e=t.calculation(e)),t.sets[t.type]?t.sets[t.type](e,n,a):t.value=e)),t._onChange&&t._onChange(t.value,t),t.onChange&&t.onChange(t.value,t)},t.get=function(){return t.dbConvert?t.dbConvert(t.value):t.value},"valuesmultitree"==t.type&&(t.clear=function(){_.each(t.treemap,(function(e){e.active=!1}))},t.convertValuesToAll=function(e,n){e||(e="id"),"names"==e&&(e="name");var a=_.map(t.value,(function(e){return t.treemap[e]})),i=[];return t.every({group:function(t,a,r,o){n&&i.push(t[e]),o()},value:function(t){i.push(t[e])}},a),i},t.convertValues=function(e){return e||(e="id"),"names"==e&&(e="name"),_.map(t.value,(function(n){return t.treemap[n][e]}))},t.composeValues=function(e,n){var a={};return _.each(t.value,(function(e,t){n[e]||(a[e]=!0)})),_.each(e,(function(e,t){n[t]||(a[t]=!0)})),a},t.childselected=function(e,n,a){var i=t.composeValues(n,a),r=_.filter(e.values,(function(e){if(i[e.id])return!0}));return e.values.length==r.length},t.parentselected=function(e,n,a){var i=t.composeValues(n,a),r=function(e){return i[e.id]?e:e.parent?r(e.parent):null};return e?r(e):null},t.every=function(e,n,a){var i=function(t,n){for(var a=t.length,r=0;r<a;r++)value=t[r],value&&(value.values?e.group(value,n,r,(function(){i(value.values,n+1)}),r):e.value(value,n,r))};n||(n=t.possibleValues),a||(a=0),i(n,0)},t.preparemap=function(){t.treemap={},t.every({value:function(e,n){e.active=!1,t.treemap[e.id]=e},group:function(e,n,a,i){t.treemap[e.id]=e,_.each(e.values,(function(t){t.parent=e,t.parents||(t.parents=[e]),_.each(e.parents||[],(function(e){t.parents.push(e)}))})),i()}})},t.preparemap()),t.searchValues=function(e){e=e.toLowerCase();var n={},a=function(t){(t.id==e||t.name.toLowerCase().indexOf(e)>-1)&&(n[t.id]=t)};return t.every({group:function(e,t,n,i){a(e),i()},value:a}),n},null===t.value&&(t.value=t.default()),t},flb=function(e){return e?e[0]&&e.substr?e[0].toUpperCase()+e.substr(1):e:""},emptyFunction=function(){return!0};var ___mobile=void 0,___tablet=void 0;isMobile=function(){return void 0!==___mobile?___mobile:___mobile=$("html").hasClass("mobile")},isTablet=function(){return void 0!==___tablet?___tablet:___tablet=$("html").hasClass("mobile")||$("html").hasClass("tablet")},clickAction=function(){return"click"},os=function(){var e=null;return-1!=navigator.appVersion.indexOf("Win")&&(e="windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="macos"),-1!=navigator.appVersion.indexOf("iPhone")&&(e="ios"),-1!=navigator.appVersion.indexOf("X11")&&(e="unix"),-1!=navigator.appVersion.indexOf("Linux")&&(e="linux"),-1!=navigator.appVersion.indexOf("Android")&&(e="android"),e},collectParameters=function(e,t){var n="?";return _.each(e,(function(e,a){t&&-1!=_.indexOf(t,a)||!e||(n+=a+"="+e+"&")})),n=n.slice(0,-1)},maskValue=function(e){e||(e={}),e.decimal||(e.decimal="."),e.allowNegative||(e.allowNegative=!0),e.precision||(e.precision=0),e.thousands||(e.thousands=","),e.prefix||(e.prefix=""),e.suffix||(e.suffix=""),e.value&&(e.value=""+e.value);var t,n,a,i=e.value||"0",r=i.indexOf("-")>-1&&e.allowNegative?"-":"",o=i.replace(/[^0-9]/g,""),s=o.slice(0,o.length-e.precision);""===(s=(s=s.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,e.thousands))&&(s="0"),t=s,e.precision>0&&(n=o.slice(o.length-e.precision),a=new Array(e.precision+1-n.length).join(0),t+=e.decimal+a+n);return i.indexOf("-")>-1&&(i=i.replace("-",""),"-"),r+e.prefix+t+e.suffix},Math.log2=Math.log2||function(e){return Math.log(e)/Math.LN2},GetBrowser=function(){var e,t=navigator.appName,n=navigator.userAgent,a=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return a&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(a[2]=e[1]),(a=a?[a[1],a[2]]:[t,navigator.appVersion,"-?"])[0]},_saveAs=function(e){if(window.navigator.msSaveOrOpenBlob){var t=new Blob([decodeURIComponent(e.file)],{type:"text/"+e.format+";charset=utf-8;"});window.navigator.msSaveOrOpenBlob(t,e.name+"."+e.format)}else saveAs(e)},p_saveAs=function(e){if("msie"==GetBrowser().toLowerCase())return message("Internet Explorer does not support this operation."),!1;e||(e={});var t=document.createElement("a");return document.body.appendChild(t),t.download=e.download||(e.name||"unknown")+"."+e.format.toLowerCase(),t.target="_blank",e.noA||("xlsx"==e.format.toLowerCase()&&(e.file="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+e.file),"csv"==e.format.toLowerCase()&&(e.file="data:text/csv;charset=utf-8,"+e.file),"pdf"==e.format.toLowerCase()&&(e.file="data:application/pdf;base64,"+e.file),"txt"==e.format.toLowerCase()&&(e.file="data:text;charset=utf-8,"+e.file)),t.href=e.file,t.click(),!0},b64toBlob=function(e,t,n){t=t||"",n=n||512;for(var a=atob(e),i=[],r=0;r<a.length;r+=n){for(var o=a.slice(r,r+n),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var c=new Uint8Array(s);i.push(c)}return new Blob(i,{type:t})},p_saveAsWithCordova=function(e,t,n,a){var i="";switch(device.platform){case"Android":i="file:///storage/emulated/0/";break;case"iOS":i=cordova.file.cacheDirectory}var r=function(a){a.getDirectory("Download",{exclusive:!1,create:!0},(function(a){a.getFile(t,{create:!0,exclusive:!1},(function(a){var i=a.toURL(),r=!1;a.createWriter((function(a){a.onwriteend=function(e){r||(window.galleryRefresh&&window.galleryRefresh.refresh(i,(function(e){}),(function(e){})),n&&n({name:t,url:i}))},a.onerror=function(e){r=!0,n&&n(null,e)},a.seek(0),a.write(e)}),(function(e){n&&n(null,e)}))}),(function(e){n&&n(null,e)}))}))};a?window.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(e){r(e.root)}),(function(){p_saveAsWithCordova(e,t,n)})):window.resolveLocalFileSystemURL(i,r,(function(e){n&&n(null,e)}))},_scrollTop=function(e,t,n,a){if(a||(a="Top"),t&&"application"!=t.attr("id")||(t=$("body,html")),void 0===n&&(n=200),n){var i={};i["scroll"+a]=e,t.animate(i,n)}else t["scroll"+a](e)},_scrollTo=function(e,t,n,a,i){i||(i="Top"),e||(e=$(this));var r=e.offset(),o=0;if("Top"==i&&(o=(e.height()-$(window).height())/2,window.cordova&&!isios()&&(o+=$(window).height()/4)),"Left"==i&&(o=(e.width()-$(t).width())/2),r){var s=r[i.toLowerCase()]+o;t&&(s=s+t["scroll"+i]()-t.offset()[i.toLowerCase()]),s+=a||0,_scrollTop(s,t,n,i)}},_scrollToTop=function(e,t,n,a){e||(e=$(this)),a||(a=0);var i=e.offset();if(console.log("scr ofssetObj",i),i){var r=i.top+a;if(t)try{r=r+t.scrollTop()-t.offset().top+a}catch(e){}console.log("scroll",r),_scrollTop(r,t,n)}},_scrollToBottom=function(e,t,n,a){e||(e=$(this)),a||(a=0);var i=e.offset();if(i){var r=i.top+a+e.height();t&&(r=r+t.scrollTop()-t.offset().top+e.height()+a),_scrollTop(r,t,n)}},inView=function(e,t){var n=0,a=0,i="auto";if(t||(t={}),t.inel){r=t.inel;try{t.elOffset=t.inel[t.f]().top}catch(e){t.elOffset=0}n=r.scrollTop(),a=r.height(),i=r.width()}else t.inel=$(window),n=t.app.lastScrollTop,a=t.app.height,i=t.app.width;t.offset||(t.offset=0),t.f||(t.f="offset"),t.elOffset=0,t.mode||(t.mode="part");var r=t.inel,o=n-t.offset,s=n+a+t.offset,l=n+t.offsetTop,c=n+a-t.offsetBottom,u=e.filter((function(){var e=$(this),a=t.cache&&e.data("c_"+i+"_"+t.f)?e.data("c_"+i+"_"+t.f):e[t.f]().top,r=t.cache&&e.data("c_"+i+"_height")?e.data("c_"+i+"_height"):e.height(),u=a+r;e.data("c_"+i+t.f,a),e.data("c_"+i+"_height",r);var d=a>=o&&a<s||u<=s&&u>o,p=a>=o&&u<=s;if("line"==t.mode)return a-n<l&&a+r>c;if("partall"==t.mode){if(p)return e.data("inView","all"),!0;if(d)return e.data("inView","part"),!0}return!("part"!=t.mode||!d)||(!("all"!=t.mode||!p)||void 0)}));return"partall"==t.mode&&(u=u.sort((function(e,t){return e=$(e),t=$(t),e.data("inView")==t.data("inView")?0:"all"==e.data("inView")?-1:"part"==e.data("inView")?1:void 0}))),u};var ease={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};SwipeParallaxNew=function(e){e||(e={}),e.directions||(e.directions={}),_.each(e.directions,(function(e,t){e.i=t}));var t=this,n=!1;t.destroyed=!1;var a=isios()?0:50,i=a?a+"ms linear":"none";var r=!1,o=function(e,t,a){e.positionclbk&&(n=!0,e.positionclbk(t,a))};return t.clear=function(){if(n){var t=e.transformel||e.el;t.css({transform:""}),t.css({"-moz-transition":i}),t.css({"-o-transition":i}),t.css({"-webkit-transition":i}),t.css({transition:i}),t.css({"-webkit-overflow-scrolling":""}),_.each(e.directions,(function(e){o(e,0)})),setTimeout((()=>{t.css({"-moz-transition":""}),t.css({"-o-transition":""}),t.css({"-webkit-transition":""}),t.css({transition:""}),t=null}),100)}r=!1,n=!1},t.init=function(){var n=null,s=function(a,s,l,c){if(!t.destroyed){if(n&&n.i!=l&&(s="cancel",l=n.i),"cancel"==s||"end"==s)return n&&("end"==s||n.distance<50&&"cancel"==s)&&n.clbk&&l==n.i&&(!n.distance||n.distance<c)&&n.clbk(),t.clear(),void(document.ontouchmove=()=>!0);if(!l||!e.directions[l])return!0;var u=e.directions[l];return u.constraints&&!u.constraints(a)?(n&&(n=null),!1!==a.cancelable&&(a.stopPropagation(),a.preventDefault()),!1):(!1!==a.cancelable&&(a.stopPropagation(),a.preventDefault()),"start"==s&&(n=null,document.ontouchmove=e=>(e.stopPropagation(),e.preventDefault(),!1)),"move"==s?(c>(u.trueshold||30)&&(o(n=u,c,a),function(t,n){var a=(e.transformel||e.el)[0],o=function(e){return"up"==e||"down"==e?"y":"left"==e||"right"==e?"x":void 0}(t);(1-.1*Math.min(Math.abs(n),100)/100).toFixed(3),"up"!=t&&"left"!=t||(n=-n),e.directions[t]&&e.directions[t].basevalue&&(n+=e.directions[t].basevalue()),e.directions[t]&&e.directions[t].scale100,n||(n=0),n=n.toFixed(0),"x"==o&&(a.style.transform="translate3d("+n+"px, 0, 0)"),"y"==o&&(a.style.transform="translate3d(0, "+n+"px, 0)"),r||(a.style["-moz-transition"]=i,a.style["-o-transition"]=i,a.style["-webkit-transition"]=i,a.style.transition=i,a.style["-webkit-overflow-scrolling"]="touch"),r=!0}(n.i,c),n.endmove&&(!n.distance||n.distance<c)&&(n.clbk(),t.clear(),document.ontouchmove=()=>!0)),!1!==a.cancelable&&(a.stopPropagation(),a.preventDefault()),!0):void 0)}};return e.el.swipe({preventDefaultEvents:e.preventDefaultEvents,allowPageScroll:e.allowPageScroll,swipeStatus:a?_.throttle(s,a):s}),t},t.destroy=function(){e.el.swipe("destroy"),e={},n=!1,t.destroyed=!0},t},Caption=function(e){var t=e.container,n=e.caption,a=e.offset||[0,0],i=!1,r=e._in||$(window),o=null,s=makeid(!0),l=e.pos||"top",c="cf_spacer",u="cf_caption",d="offset";e._in&&(d="position");var p=this;p.addscroll=!1,e._in&&(p.addscroll=!0);var f=function(){o&&o.remove(),o=null,t.find("."+c+"."+s).remove(),n.removeClass(u),n.width("auto"),n.css(l,"0"),i=!1},v=function(){i&&n.width(t.width())},h=function(){if(t.is(":visible")){var h=r.scrollTop(),m=t[d]().top-a[0],g=t[d]().top+t.height()-a[0]+a[1];p.addscroll&&(m+=h,g+=h),void 0!==e.iniHeight?g-=e.iniHeight:g-=n.height();var b=h+r.height();e.calculations&&(e.calculations.bottom&&(g=e.calculations.bottom(n,a)),e.calculations.top&&(m=e.calculations.top(n,a))),"top"==l&&h>m&&h<g||"bottom"==l&&b>m&&b<g+n.height()?i||function(){if(i)v();else{f(),i=!0;var r=0;e.removeSpacer?r=t.width():(o=$("<div>",{class:c+" "+s,height:e.spacerHeight||n.height(),width:n.width()}),n.before(o),r=o.width()),n.addClass(u),n.css(l,a[0]+"px"),n.css("z-index",e.zIndex||"3"),n.width(r)}}():i&&f()}},m=function(){r[0].addEventListener("scroll",h),window.addEventListener("resize",v)},g=function(){r[0].removeEventListener("scroll",h),window.removeEventListener("resize",v)};return p.destroy=function(){f(),g()},p.init=function(){return t||(t=n.parent()),m(),p},p.setOffset=function(e){a=e,f(),h()},p.setIn=function(e){e||(e=$(window)),r=e,g(),m(),f(),h()},p.action=h,p.clear=f,p},AJAX=function(e){var t=this,n=e.user||!1,a=e.server||!1,i=e,r={},o=function(e,t,n){if(t||(t={}),n&&n.code)return n.code;if(i.errorHandler&&t.errorHandler){var a=i.errorHandler(e,t);if(a)return a}return e};return t.set={user:function(e){n=e}},t.clearCashe=function(){r={}},t.run=function(e){e||(e={});var s=e.url||a,l=e.dataType||"json",c=e.type||"POST",u=e.dataCashe||!1,d=e.data||{},p=e.action+"."+toDeepKey(d);if(!1===n||!n.extendAjaxData||e.anon&&!0===e.anon||e.imgur||e.up1||n.extendAjaxData(d,s),!1!==n&&n.signature&&e.signature&&(d.signature=n.signature()),u){var f=deep(r,p);if(f)return void(e.success&&e.success(_.clone(f)))}if("undefined"!=typeof performance)var v=performance.now();var h={json:function(t){var a,s=t,l="";if(s.root&&(s=s.root),e.imgur||e.up1?s.success&&(a="success"):(a=(s.Result||s.status||"").toLowerCase())||!s.result||s.error||(a="success"),a)if("success"!=a&&"ok"!=a)void 0!==e.errors&&1!=e.errors||(l=o(a,e)),"wrong token"==a&&i.unathorizated&&i.unathorizated(),e.fail&&e.fail(s,l||"network");else{if(i.successHandler&&e.errorHandler)if(i.successHandler(e))return;u&&deepInsert(r,p,_.clone(s)),e.success&&(!1!==n&&!e.noExtend&&n.extendFromAjaxData&&n.extendFromAjaxData(s),e.success(s))}else l=o("noresult",e),e.fail&&e.fail(null,l||"network")},html:function(t){e.success&&e.success(t)}};if(e.before&&e.before(),e.preloader&&preloader(!0),_Node){var m={method:c,uri:s,rejectUnauthorized:!1};d&&(m.body=collectParameters(d).substr(1)),request(m,(function(n,a,i){if(n){if(o(n),_SEO)return void t.run(e);e.fail&&e.fail(null)}else if("json"==l){try{i=JSON.parse(i)}catch(t){o("Unexpected end of input TE"),e.fail&&e.fail(null)}h.json(i)}else h.html(i)}))}else{var g,b={type:c,url:s,data:d,dataType:l,headers:e.headers,beforeSend:e.beforeSend,success:function(t){var n;e.preloader&&preloader(!1),n=function(){h[l](t)},"undefined"!=typeof performance?(v=performance.now()-v,e.timeout&&e.timeout>v?setTimeout((function(){n()}),e.timeout-v):n()):n()},error:function(t,n,a){var i=null;a="";if(e.preloader&&preloader(!1),t.responseText)try{i=JSON.parse(t.responseText),void 0!==e.errors&&1!=e.errors||(a=o(i.status,e,i.data))}catch(a){a=o(null,e)}else a=o(null,e);e.fail&&e.fail(i,a||"network")}};if(e.peertubeImage){b.url=e.url+"images/"+d.Action,delete d.Action,d.type&&d.type.length>0&&(b.url+="?type="+d.type),delete d.type;try{var y=new XMLHttpRequest;y.open("POST",e.url+"users/token",!1),y.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),y.onload=function(){try{var t,n=JSON.parse(y.responseText);if(!n||!n.access_token)return void(e.fail&&e.fail({},"network"));t="Bearer "+n.access_token,b.headers={Authorization:t};const i=b.data.base64.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/)[0],r=b64toBlob(b.data.base64.split(",")[1],i);var a=new FormData;a.append("imagefile",r),b.data=a,b.processData=!1,b.contentType=!1,$.ajax(b)}catch(t){return void(e.fail&&e.fail({},"network"))}},y.onerror=function(t){e.fail&&e.fail({},"network")},y.send(toUrlEncoded({grant_type:"password",...i.peertubeCreds}))}catch(t){e.fail&&e.fail({},"network")}return}if(e.imgur)if(b.url=i.imageServer+d.Action,delete d.Action,n)g=n.imgur.token?"Bearer "+n.imgur.token:"Client-ID "+n.imgur.clientId,b.headers={Authorization:g,Accept:"application/json"};e.up1&&(b.url="https://pocketnet.app:8092/up",delete d.Action,n&&(d.api_key="c61540b5ceecd05092799f936e277552")),$.ajax(b)}},t.api=function(e){e.main?t.apim(e):(void 0===e.errorHandler&&(e.errorHandler=!0),i.platform.apiproxy?(e.url="https://"+i.platform.apiproxy.host+":"+i.platform.apiproxy.port+"/"+(e.action||""),e.api=!0,t.run(e)):e.fail&&e.fail(null,o("proxy",e)||"network"))},t.apim=function(e){void 0===e.errorHandler&&(e.errorHandler=!0),e.url=i.apimproxy+"/"+(e.action||""),e.apim=!0,t.run(e)},t.fb=function(e){e.url=i.firebase+"/"+(e.action||"").split(".").join("/"),e.fb=!0,t.run(e)},t.rtchttp=function(e){e.url=i.rtchttp+"/"+(e.action||"").split(".").join("/"),e.rtchttp=!0,t.run(e)},t.rpc=function(e){if(e.rpc=!0,void 0===e.nodeFix&&"undefined"!=i.platform.nodeid){var n=e.fail||function(){};e.nodeFix=i.platform.nodeid,e.fail=function(a){!a||500!=a.statusCode&&521!=a.statusCode||a.data&&!_.isEmpty(a.data)?n(a):(i.platform.autochange(),i.platform.nodeid==e.nodeFix?n(a):t.rpc(e))}}if(i.platform.dontuseapiproxy){var a=parseInt(1e5*Math.random());if(e.url=i.platform.sdk.system.nodeexdirect(),e.nodedirect=!0,e.url){e.data=JSON.stringify({method:e.method,params:e.parameters,id:a});var r=e.success;e.success=function(e){r(deep(e,"result")||e)},t.run(e)}else e.fail&&e.fail(null,"nodedirect")}else{e.action="rpc-"+e.method,e.data={method:e.method,parameters:hexEncode(JSON.stringify(e.parameters||""))},i.platform.nodeid&&i.platform.sdk.system.nodeex(e.data);r=e.success;e.success=function(e){r(deep(e,"data.result")||e)},t.api(e)}},t},before=function(e,t){e.before(t)},after=function(e,t){e.after(t)},html=function(e,t){e.html(t)},append=function(e,t){e.append(t)},replaceWith=function(e,t){var n=$(t);return e.replaceWith(n),n},prepend=function(e,t){e.prepend(t)},decodeSeoLinks=function(e){return e=(e=e.replace(/;equal;/g,"=")).replace(/;ques;/g,"?")},encodeSeoLinks=function(e){return e=(e=e.replace(/=/g,";equal;")).replace(/\?/g,";ques;")};var copycleartext=function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return!1}finally{document.body.removeChild(t)}}},copyText=function(e){var t=trim(e.attr("text")||e.text()||e.val());copycleartext(t)};function ecaretPosition(e,t,n){var a=e[0],i=document.createRange(),r=window.getSelection();i.setStart(a.childNodes[t],n),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}function swipedetect(e,t,n){var a,i,r,o,s,l,c,u=e,d=t||function(e){};u.addEventListener("touchstart",(function(e){var t=e.changedTouches[0];a="none",dist=0,i=t.pageX,r=t.pageY,c=(new Date).getTime()}),!1),u.addEventListener("touchmove",(function(e){}),!1),u.addEventListener("touchend",(function(e){var t=e.changedTouches[0];o=t.pageX-i,s=t.pageY-r,(l=(new Date).getTime()-c)<=300&&(Math.abs(o)>=150&&Math.abs(s)<=100?a=o<0?"left":"right":Math.abs(s)>=150&&Math.abs(o)<=100&&(a=s<0?"up":"down")),d(a,o,s,l)}),!1)}fastars=function(e){},mobsearch=function(e,t){return t.mobileSearch&&t.app?(window.rifticker.add((()=>{e.html('<div class="mobsearch">'+(t.icon||t.placeholder)+"</div>"),e.find("div").on("click",(function(){t.app.platform.ui.mobilesearch(t)}))})),null):new search(e,t)},search=function(e,t){var n=this;t||(t={}),t.events||(t.events={});var a=null,i=null,r=!1,o=!1,s="0";n.placeholder=function(t){e.find("input").attr("placeholder",t)},n.setvalue=function(t){e.find("input").val(t),t?a.addClass("searchFilled"):a.removeClass("searchFilled")};var l=function(){t.class||(t.class="");var e=['<div elementsid="template_searchIconLabel_'+(t.id||t.placeholder)+'" class="searchIconLabel">'+(t.icon||'<i class="fa fa-search" aria-hidden="true"></i><i class="fas fa-circle-notch fa-spin"></i>')+"</div>",'<div class="searchInputWrapper"><input  elementsid="sminputsearch_'+(t.id||t.placeholder)+'" class="sminput" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="text" maxlength="400" type="text" placeholder="'+(t.placeholder||"Search")+'"></div>','<div class="searchPanel"><div class="searchPanelWrapper"><div class="searchPanelItem" event="clear"><i class="fa fa-times-circle" aria-hidden="true"></i></div></div></div>'];return t.right&&(e.reverse(),t.class+=" right"),t.collectresults&&(e[1]='<div class="searchInputWrapper"><div class="sminput"  contenteditable="true"  autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="text" maxlength="400" type="text" placeholder="'+(t.placeholder||"Search")+'"></div></div>'),'<div class="search '+(t.class||"")+'"><div class="searchInput"><div class="searchInputIcon">'+e.join(" ")+'</div></div><div class="searchFastResultWrapper customscroll">'},c={openResults:function(){a.hasClass("fastSearchShow")||(a.addClass("fastSearchShow"),t.closeByHtmlRemove||$("html").on("click",c.closeclickResults))},closeResults:function(){t.closeByHtmlRemove||$("html").off("click",c.closeclickResults),a.removeClass("fastSearchShow")},closeclickResults:function(e){(!a||0===a.has(e.target).length&&a.hasClass("fastSearchShow"))&&c.closeResults()},clear:function(){a.find(".sminput").val(""),a.removeClass("searchActive"),a.removeClass("searchFilled")}},u={active:function(){t.events.active&&t.events.active(n.active)},clear:function(e){if(a){var n=a.find(".sminput").val();a.find(".sminput").val(""),a.removeClass("searchActive"),a.removeClass("searchFilled"),c.closeResults(),t.events.clear&&t.events.clear(n)}},search:function(e){var n=e.val();s=0,r=!1,c.closeResults(),t.events.search&&n&&(r=!0,a.addClass("searchActive"),t.events.search(n,(function(e){a&&(s=0,r=!1,c.closeResults(),a.removeClass("searchActive"),o||a.removeClass("searchActive"))}),u,c))},showlast:function(){var e=t.last.get();e.length&&t.last.tpl(e,(function(e,t){i.html(e),c.openResults(),t&&t(i,c)}))},fastsearch:function(e,n,l){var d=e.val();if(a){if(d&&t.events&&t.events.fastsearch&&!r){a.addClass("searchActive"),o=!0;var p=s=l||makeid();t.events.fastsearch(d,(function(t,n){p==s&&e.val()&&!r&&(o=!1,a.removeClass("searchActive"),t&&(i.html(t),c.openResults(),n&&n(i,c)))}),n)}d?a.addClass("searchFilled"):(c.closeResults(),a.removeClass("searchFilled"),o&&a.removeClass("searchActive"),t.last&&u.showlast(e),t.events.clear&&t.events.clear(!0))}}};n.clear=u.clear,n.setactive=function(e){n.active=e,u.active()},n.hide=function(){a.removeClass("searchActive"),a.removeClass("searchFilled"),c.closeResults()},n.blur=function(){e.find("input").blur()},n.focus=function(){e.find("input").focus()},n.getvalue=function(){return a.find(".sminput").val()},n.template=l;var d,p;return n.destroy=function(){a=null,i=null,r=null,o=null,e=null,t={}},n.showlast=u.showlast,e.html(l()),a=e.find(".search"),i=e.find(".searchFastResultWrapper"),(p=e.find("input")).on("keyup",(function(e){if(13==(e.keyCode||e.which))return u.search(p),e.stopPropagation(),e.preventDefault(),!1;if(void 0===t.time&&(t.time=450),t.time){var n=makeid();d=slowMade((function(){u.fastsearch(p,e,n)}),d,t.time)}else u.fastsearch(p,e)})),p.on("focus",(function(){n.setactive(!0),$(this).val()?u.fastsearch(p):t.last&&u.showlast(p)})),p.on("blur",(function(){t.events.blur&&t.events.blur($(this).val())})),a.find(".searchIconLabel").on("click",(function(){!p.val()&&t.events.blank?t.events.blank():u.search(p)})),a.find(".searchPanelItem").on("click",(function(){var e=$(this),t=e.attr("event");u[t]&&u[t](e)})),t.clbk&&t.clbk(a),n},initUpload=function(e){e||(e={});var t,n,a=e.el,i=e.multiple||!1,r=1024*(e.maxFileSize||30)*1024,o=(e.mode,e.app);e.data||(e.data={});var s=function(t,n){t.size>r?n("filesize"):!function(t){var n=t.name.split("."),a=n[n.length-1].toLowerCase();if(e.ext)if(_.isArray(e.ext)){if(-1==_.indexOf(e.ext,a))return!1}else if(e.ext!=a)return!1;return!0}(t)?n("fileext"):n(!1)},l=function(t,n,a){"image/jpeg"!=t.type&&"image/png"!=t.type&&"image/jfif"!=t.type||e.notexif||"undefined"==typeof EXIF||isios()?a&&a(n):EXIF.getData(t,(function(){var e=EXIF.getAllTags(this);exifOrientation=e.Orientation,exifOrientation?function(e,t,n){var a=new Image,i=document.createElement("canvas"),r=i.getContext("2d");a.src=e,a.onload=function(){var e=a.width,o=a.height;switch($.inArray(t,[5,6,7,8])>-1?(i.width=o,i.height=e):(i.width=e,i.height=o),t){case 1:r.drawImage(this,0,0,e,o);break;case 2:r.translate(e,0),r.scale(-1,1),r.drawImage(this,0,0,e,o);break;case 3:r.translate(e,o),r.rotate(Math.PI),r.drawImage(this,0,0,e,o);break;case 4:r.translate(0,o),r.scale(1,-1),r.drawImage(this,0,0,e,o);break;case 5:r.rotate(Math.PI/2),r.scale(1,-1),r.drawImage(this,0,0,e,o);break;case 6:r.rotate(Math.PI/2),r.translate(0,-o),r.drawImage(this,0,0,e,o);break;case 7:r.rotate(Math.PI/2),r.translate(e,-o),r.scale(-1,1),r.drawImage(this,0,0,e,o);break;case 8:r.rotate(-Math.PI/2),r.translate(-e,0),r.drawImage(this,0,0,e,o);break;default:return void r.drawImage(this,0,0,e,o)}var s=i.toDataURL("image/jpeg",.95);$(i).remove(),n(s)}}(n,exifOrientation,(function(e){a&&a(e)})):a&&a(n)}))},c=function(n){var a,i=$(this);n.stopPropagation(),n.preventDefault(),t.removeClass("hover"),t.addClass("loading"),a=void 0===n.dataTransfer?this.files:n.dataTransfer.files;var o=function(){t.removeClass("loading"),t.removeClass("hover"),t.removeClass("focus"),i.val(""),i[0].value=""};_.each(a,(function(e){e.id=makeid()})),e.onStartUpload&&(a=e.onStartUpload(a)),lazyEach({sync:!0,array:a,all:{success:function(){o(),e.onSuccess&&e.onSuccess()},fail:function(){o(),e.onFail&&e.onFail()}},action:function(t){var n=t.item,i=makeid();s(n,(function(o){var s=new FileReader,c=(r/1024/1024).toFixed(0),u={filesize:"Your photo has size greater than "+c+"MB. Please upload a photo under "+c+"MB in size.",fileext:"Invalid format of picture. Only png and jpeg are allowed"};if(e.app&&(u={filesize:self.app.localization.e("photohassizegreater",c),fileext:self.app.localization.e("invalidformat")}),o)return e.onError&&e.onError(o,n,u[o]),void t.fail();!function(e,t,n,a,i){var r;e.onloadend=(r=n,function(e){var t=r.name.split("."),n=t[t.length-1];i&&i({base64:e.target.result,file:r,ext:n,filesCount:a.length})})}(s,0,n,a,(function(a){!function(e,t,n){"image/jpeg"==e.type||"image/png"==e.type||"image/jfif"==e.type?resize(t,2048,2048,n):n&&n(t)}(n,a.base64,(function(r){a.base64=r,l(n,a.base64,(function(r){if(a.base64=r,o)e.onError&&e.onError(o,a,n,u[o]),t.fail();else{var s=new FormData;if(s.append("file",n),_.each(e.data,(function(t,n){"function"==typeof t&&(t=t()),"data"==n&&e.user&&e.user.extendAjaxData(t),(_.isArray(t)||_.isObject(t))&&(t=JSON.stringify(t)),s.append(n,t)})),e.beforeUpload&&e.beforeUpload(a,i),e.server){var l=new XMLHttpRequest;l.onreadystatechange=function(r){!function(e,t){4==e.target.readyState&&(200==e.target.status?t(JSON.parse(e.target.response)):t())}(r,(function(r){(r=deep(r,"root"))&&"Success"==r.Result?(t.success(r),e.onUpload&&e.onUpload(r,i)):(e.onError&&e.onError("serverError",a,n),t.fail())}))},l.open("POST",e.server),l.send(s)}else e.action?e.action(a,t.success):t.success()}}))}))})),s.readAsDataURL(n)}))}})};!function(){var r="";i&&(r="multiple");a.html();a.addClass("upload dropZone"),a.wrapInner('<div class="fileUploader"><div class="elContent"></div></div>'),a.find(".fileUploader").append('<div class="spinner"></div><div class="inputWrapper"><input elementsid="fileuploader_input" type="file" '+r+"></div>"),t=e.dropZone||a,n=a.find("input"),void 0===window.FileReader&&(t.text("Не поддерживается браузером!"),t.addClass("error")),a.find("input").focus((function(){a.addClass("focus")})).blur((function(){a.removeClass("focus")})),t[0]&&(t[0].ondragover=function(){return t.addClass("hover"),!1},t.on("dragout",(function(e){return t.removeClass("hover"),!1})),t[0].ondrop=c),e.uploadImage&&o&&o.mobile.supportimagegallery()?n.on("click",(function(t){return o.platform.ui.uploadImage(e),t.stopPropagation(),!1})):(n.on("change",c),n.on(clickAction(),(function(){e.onStart&&e.onStart()})))}()},globalpreloaderid=null,globalpreloader=function(e,t){if("undefined"!=typeof window){var n=$("#globalpreloader"),a=makeid();window.rifticker.add((()=>{t?n.addClass("dark"):n.removeClass("dark"),e?(globalpreloaderid=a,n.addClass("show"),setTimeout((()=>{globalpreloaderid==a&&globalpreloader(!1)}),7e3)):(n.removeClass("show"),globalpreloaderid=null)}))}},settingsLocalstorage=function(e){var t=this,n=e.options.localStoragePrefix,a={},i=function(e){return"undefined"!=typeof localStorage&&localStorage[n+e]?a[e]=JSON.parse(localStorage[n+e]):a[e]={},this},r=function(e){if("undefined"!=typeof localStorage&&a[e])try{localStorage[n+e]=JSON.stringify(a[e])}catch(e){return null}return this};return t.get=function(e,t){if(0==e&&(e="general"),i(e),void 0===t){if(a[e])return a[e]}else if(null!=typeof a[e][t])return a[e][t]},t.setAll=function(e,t){return 0==e&&(e="general"),_.each(a[e],(function(n,i){a[e][i]=t})),r(e)},t.set=function(e,t,n){return 0==e&&(e="general"),void 0!==t?(a[e]||(a[e]={}),a[e][t]=n):a[e]=n,r(e)},t.delete=function(e,t){return 0==e&&(e="general"),void 0!==t&&(a[e]||(a[e]={}),delete a[e][t],r(e)),this},t.clear=function(){_.each(getVars(localStorage),(function(e,t){t.indexOf(n)>-1&&localStorage.removeItem(t)}))},_.each(e.map,(function(e){i(e.uri)})),t.prefix=n,t},addToFunction=function(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);e&&e.apply(this,arguments),t&&t(this,arguments)}},"undefined"!=typeof window&&retry((function(){return window.jQuery}),(function(){!function(e){var t=e.event.special.dragout={current_elem:!1,setup:function(n,a,i){e("body").on("dragover.dragout",t.update_elem)},teardown:function(t){e("body").off("dragover.dragout")},update_elem:function(n){if(n.target!=t.current_elem){if(t.current_elem){var a=e(t.current_elem).parents();a&&a.andSelf&&a.andSelf().each((function(){0==e(this).find(n.target).size()&&e(this).triggerHandler("dragout")}))}t.current_elem=n.target,n.stopPropagation()}}};e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()))}(window.jQuery)})),compressedNumber=function(e,t,n){if(!e)return 0;if(n||(n=999),t||(t=0),Math.abs(e)<1)return Number(e).toFixed(t);e=Number(e).toFixed(0);for(var a=["k","m","b"],i=a.length,r=!1,o=0;o<i&&Math.abs(e)>n;o++)e/=1e3,e=Number(e.toFixed(t))==Number(e.toFixed(0))?e.toFixed(0):e.toFixed(t),r=o;return ret=e,!1!==r&&(ret+=a[r].toUpperCase()),ret},pluralform=function(e,t){return 1==e?t[0]:t[1]},decodeEntities=function(e){const t=document.createElement("p");t.innerHTML=e;var n=t.textContent||t.innerText;return t.remove(),n},truncateString=function(e,t,n){if(!e)return e;if(n||(n=!0),e.length<=t)return e;var a=e.substr(0,t-1);return decodeEntities(n?a.substr(0,a.lastIndexOf(" ")):a).replace(/(,|\.|\s)$/,"")+"..."},videoImage=function(e){var t=e;return _.isObject(t)||(t=parseVideo(t)),"youtube"==t.type?"https://img.youtube.com/vi/"+t.id+"/mqdefault.jpg":"vimeo"==t.type?"https://vumbnail.com/"+t.id+".jpg":"peertube"==t.type?null:void 0},parseVideo=function(e){if(!e)return{};let t,n,a,i=null,r=null,o=null,s=null;e.startsWith("peertube:")&&(r="peertube",e=e.replace("peertube:","http:"));try{const i=new URL(e);t=i.hostname,n=i.pathname,a=i.searchParams}catch(e){return{}}const l=n.slice(1),c=l.split("/");if("peertube"===r)o=t,l.includes("stream")?(s="peertubeStream",i=c[0]):(s="common",i=l);else if(t.includes("youtube.com"))r="youtube",e=`https://youtu.be/${i}`,l.includes("watch")?i=a.get("v"):l.includes("shorts")&&(i=c[1]);else if(t.includes("youtu.be"))r="youtube",i=l;else if(t.includes("player.vimeo.com"))r="vimeo",i=c[1];else if(t.includes("vimeo.com"))isNaN(l)||(r="vimeo",i=l);else if(t.includes("bitchute.com"))r="bitchute",i=c[1];else if(t.includes("brighteon.com")){r="brighteon";var u=(l||"").split("?")[0];if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u))return{};i=u}else if(n.includes("/ipfs/")){const e=/ipfs\/([A-z0-9]+)/,t=l.match(e)[1],n="video"===a.get("type");if(!t||!n)return{};r="ipfs",i=t}return{type:r,url:e,id:i,host_name:o,subType:s}},trimHtml=function(e,t,n=0){for(var a=function(e){var t=_.indexOf(i,e);t>-1&&i.splice(t,1)},i=[],r=e.length,o=e,s=0,l=0,c=!1,u=!1,d=!1,p=0,f="",v=0;v<r&&s<t&&(!n||p<n);v++){var h=e[v];"\n"==h&&p++,"<"==h?(e[v+1]&&"/"==e[v+1]?(d=!0,c=!0):(u=!0,c=!0),f=""):">"==h?(d&&a(f),u&c&&i.push(f),d=!1,u=!1,c=!1,f=""):d||u?" "!=h&"/"!=h&c?f+=h:u&c&&(i.push(f),c=!1):c||s++,l++}return e.length>l&&(o=e.substr(0,l)+"...",_.each(i,(function(e){"br"!=e&&"img"!=e&&(o=o+"</"+e+">")}))),o},vis=function(e,t,n,a){n||(n=0);var i={thousands:",",decimal:".",allowZero:!0,precision:0,prefix:"$ ",input:!1,allowNegative:!0};if(a||(a="&mdash;"),t){if(void 0===e)return a;if("percent"==t)return(100*e).toFixed(n)+" %";if("dollars"==t)return i.value=Number(e).toFixed(n).toString(),maskValue(i);if("dollarshtml"==t)return i.prefix="$&nbsp;",i.value=Number(e).toFixed(n).toString(),maskValue(i);if("dollarslight"==t)return i.prefix="",i.value=Number(e).toFixed(n).toString(),maskValue(i);if("range0-100"==t){return{0:"0",1:"<25%",26:"<50%",51:"<75%",76:">75%"}[e]}if("yesno"==t){if("yes"==e||1==e)return"Yes";if("no"==e||0==e)return"No";if(!e)return""}if("yesno12"==t){if("yes"==e||1==e)return"Yes";if("no"==e||2==e)return"No";if(!e)return""}if("number"==t)return _.isNumber(Number(e))&&"NaN"!=e.toString()&&"undefined"!=e.toString()&&"null"!=e.toString()?(e=Number(e).toFixed(n),i.prefix="",i.precision=n,i.value=e,maskValue(i)):a;if("date"==t)return convertDate(e)}return e},checkUrlForImage=function(e){if(e=e.split("?")[0].toLowerCase(),_.find([".jpg",".gif",".png",".jpeg"],(function(t){if(e.indexOf(t)>-1)return!0})))return!0},donottrustLink=function(e){return e.replace(/<a /g,'<a donottrust="donottrust" ')},boolToNumber=function(e){return e?1:0},numberToBool=function(e){return!!e},findAndReplaceLinkClearReverse=function(e=""){return findAndReplaceLinkClear(e,formatInternalLinkReverse)},findAndReplaceLinkClear=function(e="",t){return"undefined"!=typeof linkifyStr?linkifyStr(e,{formatHref:(e,n)=>("url"==n&&(e=(t||formatInternalLinkHref)(e)),e),render:e=>{var t=deep(e,"attributes.href")||"";return t=t.replace("mailto:","")}}):e},findAndReplaceLink=function(e="",t){if("undefined"!=typeof linkifyHtml)try{var n={cordovalink:"_system"};return t&&(n.donottrust="true"),linkifyHtml(e,{attributes:n,truncate:50,format:(e,t)=>("url"==t&&(e=formatInternalLink(e)),e.length>50&&(e=e.slice(0,50)+"…"),e),formatHref:(e,t)=>("url"==t&&(e=formatInternalLinkHref(e)),e)})}catch(e){}return e},hideString=function(e){for(var t="",n=0;n<e.length;n++)n<.666*e.length?t+="*":t+=e[n];return t},Base64Helper={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,a,i,r,o,s,l="",c=0;for(e=Base64Helper._utf8_encode(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(a=e.charCodeAt(c++))>>6,s=63&a,isNaN(n)?o=s=64:isNaN(a)&&(s=64),l=l+Base64Helper._keyStr.charAt(i)+Base64Helper._keyStr.charAt(r)+Base64Helper._keyStr.charAt(o)+Base64Helper._keyStr.charAt(s);return l},decode:function(e){var t,n,a,i,r,o,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=Base64Helper._keyStr.indexOf(e.charAt(l++))<<2|(i=Base64Helper._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(r=Base64Helper._keyStr.indexOf(e.charAt(l++)))>>2,a=(3&r)<<6|(o=Base64Helper._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(n)),64!=o&&(s+=String.fromCharCode(a));return s=Base64Helper._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){for(var t="",n=0,a=0,i=0;n<e.length;)(a=e.charCodeAt(n))<128?(t+=String.fromCharCode(a),n++):a>191&&a<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&a)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&c3),n+=3);return t},fromFile:e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>t(a.result),a.onerror=e=>n(e)})),fromFileToBase64:e=>new Promise(((t,n)=>{const a=new FileReader;a.readAsBinaryString(e),a.onloadend=()=>t(a.result),a.onerror=e=>n(e)})),toFileFetch:function(e){return fetch(e).then((e=>e.blob())).then((e=>new(window.wFile||window.File)([e],"File name",{type:"image/png"})))},toFile:function(e){try{for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),i=a.length,r=new Uint8Array(i);i--;)r[i]=a.charCodeAt(i);var o=new(window.wFile||window.File)([r],"Filename",{type:n});return Promise.resolve(o)}catch(e){return Promise.reject(e)}}};var fkit={extensions:{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/webp":"webp","image/jfif":"jfif"},extensionBase64:function(e){return e&&fkit.extensions[e.split(";")[0].replace("data:","")]||""},getExtension:function(e){var t=e.name.split(".");return t[t.length-1].toLowerCase()},getName:function(e){var t=e.name.split(".");return t.pop(),t.join(".")},checkExtension:function(e,t=[]){return!t.length||-1!=_.indexOf(t,fkit.getExtension(e))}};function formatBytes(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}function syntaxHighlight(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}if(simpleRequest=function(e,t){return new Promise((function(t,n){var a=new XMLHttpRequest;a.onload=function(){t(a.response)},a.onerror=function(e){n(e)},a.open("GET",e),a.send(null)}))},fetchLocal=function(e,t="file"){return new Promise((function(n,a){var i=new XMLHttpRequest;i.onload=function(){var e=i.getResponseHeader("content-type");t=t+fkit.extensions[e]?"."+fkit.extensions[e]:"",n({data:new Blob([i.response],{type:e,name:t})})},i.onerror=function(){a(new TypeError("Local request failed"))},i.open("GET",e),i.responseType="arraybuffer",i.send(null)}))},fetchLocalAppCopy=function(e,t="file"){return new Promise((function(n,a){var i=new XMLHttpRequest;i.onload=function(){var e=i.getResponseHeader("content-type").replace(" charset=UTF-8","");t=t+fkit.extensions[e]?"."+fkit.extensions[e]:"",n({data:new Blob([i.response],{type:e,name:t})})},i.onerror=function(){a(new TypeError("Local request failed"))},i.open("GET",e),i.responseType="arraybuffer",i.send(null)}))},toUrlEncoded=function(e){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")},getBase64=function(e){return new Promise(((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>n(e)}))},findResponseError=e=>{const t=["response.data.errors","response.data.error"].map((t=>deep(e,t))).filter((e=>e))[0]||{};return"object"==typeof t?(Object.values(t)[0]||{}).msg:t},serialize=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},checkConnection=function(){if("undefined"!=typeof window){if(window.cordova&&navigator.connection&&navigator.connection.type){var e=navigator.connection.type,t={};return t[Connection.UNKNOWN]="UNKNOWN",t[Connection.ETHERNET]="ETHERNET",t[Connection.WIFI]="WIFI",t[Connection.CELL_2G]="2G",t[Connection.CELL_3G]="3G",t[Connection.CELL_4G]="4G",t[Connection.CELL]="CELL",t[Connection.NONE]="NONE",t[e]}return!window.cordova&&navigator.connection&&navigator.connection.type?navigator.connection.type:""}},stringEqTrig=function(e,t){e||(e=""),t||(t="");var n=function(e){var t=function(e){return e.split(/[ \t\v\r\n\f,.]+/)}(e).join(" ");return t.toLowerCase().replace(/[^a-zа-я0-9&]*/g,"")},a=function(e){for(var t,n={},a=-1;a<=e.length;a++){for(var i="",r=a-1;r<=a+1;r++)i+=(t=r)<0||t>=e.length?"_":e[t];n[i]=1}return n},i=a(n(e)),r=a(n(t)),o=0,s=Math.max(_.toArray(i).length,_.toArray(r).length);return _.each(i,(function(e,t){r[t]&&o++})),o/s},"undefined"!=typeof window){var splashScreen=document.getElementById("splashScreen");if(splashScreen){var splashScreeninterval,splashScreenIcon=document.querySelector("#splashScreen .icon"),stopRotation=!1,logos=["img/splashscreen/pocketnet-logo-16.svg","img/splashscreen/pocketnet-logo-17.svg","img/splashscreen/pocketnet-logo-15.svg","img/splashscreen/pocketnet-logo-14.svg","img/splashscreen/pocketnet-logo-18.svg","img/splashscreen/pocketnet-logo-19.svg"],nextLogoIndex=0,zoomInDuration=500,rotatingDuration=1e3,zoomOutDuration=500;hideSplashScreen=function(){stopRotation=!0},rotatingAnimationEnded=function(){splashScreenIcon&&stopRotation&&(splashScreenIcon.classList.remove("rotate"),splashScreenIcon.classList.add("zoom-out-rotate"),splashScreen.classList.add("fade-out"),setTimeout((()=>{null!=splashScreeninterval&&clearInterval(splashScreeninterval),splashScreen&&splashScreen.remove(),splashScreenIcon=null,splashScreen=null}),2*zoomOutDuration))},setTimeout((()=>{splashScreenIcon&&(splashScreenIcon.classList.remove("zoom-in"),splashScreenIcon.classList.add("rotate"),rotatingAnimationEnded(),splashScreeninterval=setInterval(rotatingAnimationEnded,rotatingDuration))}),zoomInDuration)}}function getRandomFloat(e,t,n){const a=(Math.random()*(t-e)+e).toFixed(n);return parseFloat(a)}waitPromise=function(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))},drawRoundedImage=(e,t,n,a)=>new Promise((i=>{e||i("");const r=new Image;r.src=e,r.onload=()=>{const e=document.createElement("canvas");e.width=n,e.height=a;const o=e.getContext("2d"),s=n||r.naturalWidth,l=a||r.naturalHeight,c={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};var u=Math.min(r.naturalWidth,r.naturalHeight),d=(r.width-u)/2,p=(r.height-u)/2;Array.isArray(t)||(t=[t]),c.topLeft=t[0],c.topRight=t[1]||(void 0===t[1])*t[0],c.bottomRight=t[2]||(void 0===t[2])*t[0],c.bottomLeft=t[3]||(void 0===t[3])*(t[1]||(void 0===t[1])*t[0]),o.beginPath(),o.arc(0+c.topLeft,0+c.topLeft,c.topLeft,Math.PI,Math.PI+Math.PI/2),o.lineTo(0+s-c.topRight,0),o.arc(0+s-c.topRight,0+c.topRight,c.topRight,Math.PI+Math.PI/2,2*Math.PI),o.lineTo(0+s,0+l-c.bottomRight),o.arc(0+s-c.bottomRight,0+l-c.bottomRight,c.bottomRight,2*Math.PI,Math.PI/2),o.lineTo(0+c.bottomLeft,0+l),o.arc(0+c.bottomLeft,0+l-c.bottomLeft,c.bottomLeft,Math.PI/2,Math.PI),o.closePath(),o.save(),o.clip(),o.drawImage(r,d,p,u,u,0,0,o.canvas.width,o.canvas.height),o.restore(),i(o.canvas.toDataURL("image/png",1))},r.onerror=e=>{i("")}})),randomizer=function(e,t){if(t||(t="probability"),!e)return null;if(!e.length)return null;e=_.sortBy(e,(e=>-Number(e[t]||0)));var n=_.reduce(e,(function(e,n){return e+Number(n[t]||0)}),0);if(n<=0)return e[rand(0,e.length-1)];var a=getRandomFloat(0,n,8),i=0;return _.find(e,(function(e){if(i+e[t]>a&&i<=a)return!0;i+=e[t]}))},randomizerarray=function(e,t,n){for(var a=[],i=0;i<t;i++){var r=randomizer(e,n);r&&(e=_.filter(e,(function(e){return!isEqual(e,r,!1)})),a.push(r))}return a},resizeGif=function(e){var t=this,n=null,a={},i=async function(){if(n)return n;const{data:e}=await axios.get("https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js",{responseType:"blob"}),t=await e.text(),a=new Blob([t],{type:"application/javascript"});return n=URL.createObjectURL(a)},r=function(e,t,n){const a=o(t,n);var i=e.width,r=e.height,s=i;r<i&&(s=r);return a.getContext("2d").drawImage(e,(i-s)/2,(r-s)/2,s,s,0,0,t,n),Promise.resolve(a)};function o(e,t){if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,t);const n=document.createElement("canvas");return n.width=e,n.height=t,n}t.prepare=function(){return Promise.all([new Promise(((t,n)=>{importScripts([{src:"js/vendor/gif.js",f:"js"},{src:"js/vendor/gif-frames.min.js",f:"js"}],a,(function(){t()}),null,null,e)})),i()])},t.resize=async function(e,{width:t,height:n}){if("undefined"==typeof gifFrames)throw new Error("getFrames");if("undefined"==typeof GIF)throw new Error("GIF");const a=await async function(e){return(await gifFrames({url:e,frames:"all",outputType:"canvas"})).map((e=>({image:e.getImage(),delay:e.frameInfo.delay})))}(e),i=await Promise.all(a.map((({image:e})=>function(e,t,n){return r(e,t,n)}(e,t,n)))).then((e=>e.map(((e,t)=>({image:e,delay:10*a[t].delay}))))),o=await s(i,{transparentThreshold:127,speedMultiplier:1});return getBase64(o)};var s=async function(e,t={}){const{speedMultiplier:a=1,background:i=null}=t,r=new GIF({workers:2,workerScript:n,quality:1,transparent:i?null:"rgba(0, 0, 0, 0)"});return e.forEach((({image:e,delay:n})=>r.addFrame(function(e,t={}){const{background:n=null,transparentThreshold:a=127}=t,i=document.createElement("canvas");i.width=e.width,i.height=e.height;const r=i.getContext("2d");if(n)r.fillStyle=n,r.fillRect(0,0,i.width,i.height),r.drawImage(e,0,0);else{const t=e.getContext("2d").getImageData(0,0,i.width,i.height).data.map(((e,t,n)=>t%4==3&&_.some(n.slice(t-3,t),(e=>0!==e))?e<=a?0:255:e));r.putImageData(new ImageData(t,i.width,i.height),0,0)}return i}(e,t),{delay:n/a}))),new Promise(((e,t)=>{r.on("finished",e);try{r.render()}catch(e){t(e)}}))};return t};class LoadingBar{constructor(e,t){this.boundOnClick=this.onClick.bind(this),this.elem=e,this.elem.addEventListener("click",this.boundOnClick),t&&this.setStyles(t)}onClick(){this.toggleStateChange();"function"==typeof this.onStateChange&&this.onStateChange({stopped:this.stopped,value:this.value})}clearListenStateChange(){this.elem.removeEventListener("click",this.boundOnClick)}listenStateChange(e){this.onStateChange=e}listenErrors(e){this.onListenErrors=e}setValue(e){const t="function"==typeof this.onListenErrors;this.stopped&&t&&this.onListenErrors({type:"warning",text:"Tried to set value when state is stopped"}),e>100&&(e=100,t&&this.onListenErrors({type:"warning",text:"Tried to set value bigger than 100%"})),this.value=e,this.elem.style.setProperty("--percent",e)}setStyles(e){e.barColor&&this.elem.style.setProperty("--barColor",e.barColor),e.lineColor&&this.elem.style.setProperty("--lineColor",e.lineColor)}toggleStateChange(){this.stopped?this.setLoading():this.setPaused()}setPaused(){this.stopped=!0,this.elem.setAttribute("data-loading",!this.stopped)}setLoading(){this.stopped=!1,this.elem.setAttribute("data-loading",!this.stopped)}}bufferToHex=e=>[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join(""),checkMagicBytes=async(e,t)=>{const n=await e.arrayBuffer(),a=new Uint8Array(n.slice(0,t.length));return bufferToHex(a)===bufferToHex(t)},isVideoFormatMatroska=e=>checkMagicBytes(e,[26,69,223,163]);var connectionSpeed=function(){var e=!1,t=window.navigator,n=t.connection||t.mozConnection||t.webkitConnection||null;if(!n)return e;if("downlinkMax"in n){var a=n.downlinkMax;return a&&isFinite(a)?a:e}if("bandwidth"in n){var i=n.bandwidth;return i?isNaN(speed)?e:8*i:e}switch(n.type){case"none":return 0;case"2g":return.134;case"bluetooth":case"cellular":return 2;case"3g":return 8.95;case"4g":return 100;case"ethernet":return 550;case"wifi":return 600}return e};function Circles(e){this.init=function(e){"radius"in e?(this.radMin="min"in e.radius?e.radius.min:1,this.radMax="max"in e.radius?e.radius.max:randInt(10,50)):(this.radMin=1,this.radMax=randInt(100,300)),"zIndex"in e?(this.zMin="min"in e.zIndex?e.zIndex.min:0,this.zMax="max"in e.zIndex?e.zIndex.max:20):(this.zMin=0,this.zMax=20),"hue"in e?(this.hueMin="min"in e.hue?e.hue.min:randInt(0,180),this.hueMax="max"in e.hue?e.hue.max:randInt(180,359)):(this.hueMin=randInt(0,180),this.hueMax=randInt(180,359)),"saturation"in e?(this.satMin="min"in e.saturation?e.saturation.min:randInt(50,70),this.satMax="max"in e.saturation?e.saturation.max:randInt(70,100)):(this.satMin=randInt(50,70),this.satMax=randInt(70,100)),"light"in e?(this.lgtMin="min"in e.light?e.light.min:randInt(40,50),this.lgtMax="max"in e.light?e.light.max:randInt(50,60)):(this.lgtMin=randInt(40,50),this.lgtMax=randInt(50,60)),"alpha"in e?(this.aMin="min"in e.alpha?e.alpha.min:randNum(.1,.3),this.aMax="max"in e.alpha?e.alpha.max:randNum(.7,.9)):(this.aMin=randNum(.1,.3),this.aMax=randNum(.7,.9)),this.quant="quantity"in e?"quantity"in e?e.quantity:randInt(8,25):this.radMax<20?randInt(15,45):randInt(10,25),this.fillMode="fillMode"in e?e.fillMode:"rand",this.target="target"in e?e.target:document.getElementById("bg-screen"),this.main()},this.reset=function(){this.current=document.createElement("div"),this.rad=randInt(this.radMin,this.radMax),this.hue=randInt(this.hueMin,this.hueMax),this.sat=randInt(this.satMin,this.satMax),this.lgt=randInt(this.lgtMin,this.lgtMax),this.alf=randNum(this.aMin,this.aMax),this.zin=randInt(this.zMin,this.zMax)},this.main=function(){var e=null;e="fill"==this.fillMode?this.setFill.bind(this):"ring"==this.fillMode?this.setRing.bind(this):this.setRand.bind(this);for(var t=0;t<this.quant;t++)this.reset(),this.setBasics(),e(),this.target.appendChild(this.current)},this.setBasics=function(){this.current.style.display="block",this.current.style.position="absolute",this.current.style.top=randInt(0,100)+"%",this.current.style.left=randInt(0,100)+"%",this.current.style.zIndex=this.zin,this.current.style.webkitTransform="translate(-50%, -50%)",this.current.style.mozTransform="translate(-50%, -50%)",this.current.style.transform="translate(-50%, -50%)"},this.setFill=function(){this.current.style.width=this.rad+"px",this.current.style.height=this.rad+"px",this.current.style.borderRadius=this.rad+"px",this.current.style.mozBorderRadius=this.rad+"px",this.current.style.webkitBorderRadius=this.rad+"px",this.current.style.backgroundColor="hsla("+this.hue+", "+this.sat+"%, "+this.lgt+"%, "+this.alf+")"},this.setRing=function(){var e=this.rad-randInt(0,this.rad),t=this.rad-e;this.current.style.width=e+"px",this.current.style.height=e+"px",this.current.style.backgroundColor="hsla(0,0%,0%,0.0)",this.current.style.webkitBorderRadius=this.rad+"px",this.current.style.mozBorderRadius=this.rad+"px",this.current.style.borderRadius=this.rad+"px",this.current.style.border=t+"px solid",this.current.style.borderColor="hsla("+this.hue+", "+this.sat+"%, "+this.lgt+"%, "+this.alf+")"},this.setRand=function(){Math.random()>.49?this.setRing():this.setFill()},"object"==typeof e?this.init(e):this.init({})}function randInt(e,t){return Math.floor(this.randNum(e,t))}function randNum(e,t){return Math.random()*(t-e)+e}function randVal(e,t,n){n=!!n;var a;return 0==(a=isInt(e)&&isInt(t)?randInt(e,t):randNum(e,t))?n?a:randVal(e,t):randone()?-a:a}function isInt(e){return e%1==0}function randone(){return 1==Math.round(Math.random())}replaceArchiveInImage=function(e){var t=e;return window.project_config?.archivedPeertubeServers?.map((e=>{t.includes(e)&&(t=t.replace(e,"peertube.archive.pocketnet.app"))})),t.replace("bastyon.com:8092","pocketnet.app:8092").replace("test.pocketnet","pocketnet").replace("https://http://","http://")};